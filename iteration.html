<!DOCTYPE html>
<html lang="" xml:lang="">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>21 Iteration | R for Data Science: Exercise Solutions</title>
<meta name="description" content="Solutions to the exercises in “R for Data Science” by Garrett Grolemund and Hadley Wickham.">
<meta name="generator" content="bookdown 0.19.4 and GitBook 2.6.7">
<meta property="og:title" content="21 Iteration | R for Data Science: Exercise Solutions">
<meta property="og:type" content="book">
<meta property="og:url" content="http://jrnold.github.io/r4ds-exercise-solutions">
<meta property="og:image" content="http://jrnold.github.io/r4ds-exercise-solutions/img/r4ds-exercise-solutions-cover.png">
<meta property="og:description" content="Solutions to the exercises in “R for Data Science” by Garrett Grolemund and Hadley Wickham.">
<meta name="github-repo" content="jrnold/r4ds-exercise-solutions">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="21 Iteration | R for Data Science: Exercise Solutions">
<meta name="twitter:site" content="@jrnld">
<meta name="twitter:description" content="Solutions to the exercises in “R for Data Science” by Garrett Grolemund and Hadley Wickham.">
<meta name="twitter:image" content="http://jrnold.github.io/r4ds-exercise-solutions/img/r4ds-exercise-solutions-cover.png">
<meta name="author" content="Jeffrey B. Arnold">
<meta name="date" content="2020-06-23">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<link rel="prev" href="vectors.html">
<link rel="next" href="model-intro.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script><link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet">
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet">
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet">
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet">
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet">
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet">
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet">
<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script><script src="libs/viz-1.8.2/viz.js"></script><link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
<script src="libs/grViz-binding-1.0.6.1/grViz.js"></script><link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet">
<script src="libs/str_view-binding-1.4.0/str_view.js"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-61453123-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-61453123-2');
</script><!--
License: MIT License
Copyright (c) 2016 Open Review Toolkit & Ben Marwick

See https://github.com/benmarwick/bookdown-ort/blob/master/hypothesis.html
--><script async defer src="https://hypothes.is/embed.js"></script><script>window.hypothesisConfig = function () { return {showHighlights: false}; };</script><style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>
<link rel="stylesheet" href="includes/r4ds.css" type="text/css">
<link rel="stylesheet" href="includes/r4ds-solutions.css" type="text/css">
<link rel="stylesheet" href="includes/ort.css" type="text/css">
</head>
<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation"><ul class="summary">
<li><strong><a href="./">R for Data Science:<br>Exercise Solutions</a></strong></li>

<li class="divider">
<li class="chapter" data-level="" data-path="index.html">
<a href="index.html"><i class="fa fa-check"></i>Welcome</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgments"><i class="fa fa-check"></i>Acknowledgments</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#license"><i class="fa fa-check"></i>License</a></li>
</ul>
</li>
<li class="chapter" data-level="1" data-path="introduction.html">
<a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#how-this-book-is-organized"><i class="fa fa-check"></i>How this book is organized</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#bugscontributing"><i class="fa fa-check"></i>Bugs/Contributing</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#colophon"><i class="fa fa-check"></i>Colophon</a></li>
</ul>
</li>
<li class="part"><span><b>I Explore</b></span></li>
<li class="chapter" data-level="2" data-path="explore-intro.html"><a href="explore-intro.html"><i class="fa fa-check"></i><b>2</b> Introduction</a></li>
<li class="chapter" data-level="3" data-path="data-visualisation.html">
<a href="data-visualisation.html"><i class="fa fa-check"></i><b>3</b> Data visualisation</a><ul>
<li class="chapter" data-level="3.1" data-path="data-visualisation.html"><a href="data-visualisation.html#introduction-1"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="data-visualisation.html">
<a href="data-visualisation.html#first-steps"><i class="fa fa-check"></i><b>3.2</b> First steps</a><ul>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.2.1"><i class="fa fa-check"></i>Exercise 3.2.1</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.2.2"><i class="fa fa-check"></i>Exercise 3.2.2</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.2.3"><i class="fa fa-check"></i>Exercise 3.2.3</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.2.4"><i class="fa fa-check"></i>Exercise 3.2.4</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.2.5"><i class="fa fa-check"></i>Exercise 3.2.5</a></li>
</ul>
</li>
<li class="chapter" data-level="3.3" data-path="data-visualisation.html">
<a href="data-visualisation.html#aesthetic-mappings"><i class="fa fa-check"></i><b>3.3</b> Aesthetic mappings</a><ul>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.3.1"><i class="fa fa-check"></i>Exercise 3.3.1</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.3.2"><i class="fa fa-check"></i>Exercise 3.3.2</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.3.3"><i class="fa fa-check"></i>Exercise 3.3.3</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.3.4"><i class="fa fa-check"></i>Exercise 3.3.4</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.3.5"><i class="fa fa-check"></i>Exercise 3.3.5</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.3.6"><i class="fa fa-check"></i>Exercise 3.3.6</a></li>
</ul>
</li>
<li class="chapter" data-level="3.4" data-path="data-visualisation.html"><a href="data-visualisation.html#common-problems"><i class="fa fa-check"></i><b>3.4</b> Common problems</a></li>
<li class="chapter" data-level="3.5" data-path="data-visualisation.html">
<a href="data-visualisation.html#facets"><i class="fa fa-check"></i><b>3.5</b> Facets</a><ul>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.5.1"><i class="fa fa-check"></i>Exercise 3.5.1</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.5.2"><i class="fa fa-check"></i>Exercise 3.5.2</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.5.3"><i class="fa fa-check"></i>Exercise 3.5.3</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.5.4"><i class="fa fa-check"></i>Exercise 3.5.4</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.5.5"><i class="fa fa-check"></i>Exercise 3.5.5</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.5.6"><i class="fa fa-check"></i>Exercise 3.5.6</a></li>
</ul>
</li>
<li class="chapter" data-level="3.6" data-path="data-visualisation.html">
<a href="data-visualisation.html#geometric-objects"><i class="fa fa-check"></i><b>3.6</b> Geometric objects</a><ul>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.6.1"><i class="fa fa-check"></i>Exercise 3.6.1</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.6.2"><i class="fa fa-check"></i>Exercise 3.6.2</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.6.3"><i class="fa fa-check"></i>Exercise 3.6.3</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.6.4"><i class="fa fa-check"></i>Exercise 3.6.4</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.6.5"><i class="fa fa-check"></i>Exercise 3.6.5</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.6.6"><i class="fa fa-check"></i>Exercise 3.6.6</a></li>
</ul>
</li>
<li class="chapter" data-level="3.7" data-path="data-visualisation.html">
<a href="data-visualisation.html#statistical-transformations"><i class="fa fa-check"></i><b>3.7</b> Statistical transformations</a><ul>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.7.1"><i class="fa fa-check"></i>Exercise 3.7.1</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.7.2"><i class="fa fa-check"></i>Exercise 3.7.2</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.7.3"><i class="fa fa-check"></i>Exercise 3.7.3</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.7.4"><i class="fa fa-check"></i>Exercise 3.7.4</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.7.5"><i class="fa fa-check"></i>Exercise 3.7.5</a></li>
</ul>
</li>
<li class="chapter" data-level="3.8" data-path="data-visualisation.html">
<a href="data-visualisation.html#position-adjustments"><i class="fa fa-check"></i><b>3.8</b> Position adjustments</a><ul>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.8.1"><i class="fa fa-check"></i>Exercise 3.8.1</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.8.2"><i class="fa fa-check"></i>Exercise 3.8.2</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.8.3"><i class="fa fa-check"></i>Exercise 3.8.3</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.8.4"><i class="fa fa-check"></i>Exercise 3.8.4</a></li>
</ul>
</li>
<li class="chapter" data-level="3.9" data-path="data-visualisation.html">
<a href="data-visualisation.html#coordinate-systems"><i class="fa fa-check"></i><b>3.9</b> Coordinate systems</a><ul>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.9.1"><i class="fa fa-check"></i>Exercise 3.9.1</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.9.2"><i class="fa fa-check"></i>Exercise 3.9.2</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.9.3"><i class="fa fa-check"></i>Exercise 3.9.3</a></li>
<li class="chapter" data-level="" data-path="data-visualisation.html"><a href="data-visualisation.html#exercise-3.9.4"><i class="fa fa-check"></i>Exercise 3.9.4</a></li>
</ul>
</li>
<li class="chapter" data-level="3.10" data-path="data-visualisation.html"><a href="data-visualisation.html#the-layered-grammar-of-graphics"><i class="fa fa-check"></i><b>3.10</b> The layered grammar of graphics</a></li>
</ul>
</li>
<li class="chapter" data-level="4" data-path="workflow-basics.html">
<a href="workflow-basics.html"><i class="fa fa-check"></i><b>4</b> Workflow: basics</a><ul>
<li class="chapter" data-level="" data-path="workflow-basics.html"><a href="workflow-basics.html#exercise-4.1"><i class="fa fa-check"></i>Exercise 4.1</a></li>
<li class="chapter" data-level="" data-path="workflow-basics.html"><a href="workflow-basics.html#exercise-4.2"><i class="fa fa-check"></i>Exercise 4.2</a></li>
<li class="chapter" data-level="" data-path="workflow-basics.html"><a href="workflow-basics.html#exercise-4.3"><i class="fa fa-check"></i>Exercise 4.3</a></li>
</ul>
</li>
<li class="chapter" data-level="5" data-path="transform.html">
<a href="transform.html"><i class="fa fa-check"></i><b>5</b> Data transformation</a><ul>
<li class="chapter" data-level="5.1" data-path="transform.html"><a href="transform.html#introduction-2"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="transform.html">
<a href="transform.html#filter-rows-with-filter"><i class="fa fa-check"></i><b>5.2</b> Filter rows with <code>filter()</code></a><ul>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.2.1"><i class="fa fa-check"></i>Exercise 5.2.1</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.2.2"><i class="fa fa-check"></i>Exercise 5.2.2</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.2.3"><i class="fa fa-check"></i>Exercise 5.2.3</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.2.4"><i class="fa fa-check"></i>Exercise 5.2.4</a></li>
</ul>
</li>
<li class="chapter" data-level="5.3" data-path="transform.html">
<a href="transform.html#arrange-rows-with-arrange"><i class="fa fa-check"></i><b>5.3</b> Arrange rows with <code>arrange()</code></a><ul>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.3.1"><i class="fa fa-check"></i>Exercise 5.3.1</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.3.2"><i class="fa fa-check"></i>Exercise 5.3.2</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.3.3"><i class="fa fa-check"></i>Exercise 5.3.3</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.3.4"><i class="fa fa-check"></i>Exercise 5.3.4</a></li>
</ul>
</li>
<li class="chapter" data-level="5.4" data-path="transform.html">
<a href="transform.html#select"><i class="fa fa-check"></i><b>5.4</b> Select columns with <code>select()</code></a><ul>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.4.1"><i class="fa fa-check"></i>Exercise 5.4.1</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.4.2"><i class="fa fa-check"></i>Exercise 5.4.2</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.4.3"><i class="fa fa-check"></i>Exercise 5.4.3</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.4.4"><i class="fa fa-check"></i>Exercise 5.4.4</a></li>
</ul>
</li>
<li class="chapter" data-level="5.5" data-path="transform.html">
<a href="transform.html#add-new-variables-with-mutate"><i class="fa fa-check"></i><b>5.5</b> Add new variables with <code>mutate()</code></a><ul>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.5.1"><i class="fa fa-check"></i>Exercise 5.5.1</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.5.2"><i class="fa fa-check"></i>Exercise 5.5.2</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.5.3"><i class="fa fa-check"></i>Exercise 5.5.3</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.5.4"><i class="fa fa-check"></i>Exercise 5.5.4</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.5.5"><i class="fa fa-check"></i>Exercise 5.5.5</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.5.6"><i class="fa fa-check"></i>Exercise 5.5.6</a></li>
</ul>
</li>
<li class="chapter" data-level="5.6" data-path="transform.html">
<a href="transform.html#grouped-summaries-with-summarise"><i class="fa fa-check"></i><b>5.6</b> Grouped summaries with <code>summarise()</code></a><ul>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.6.1"><i class="fa fa-check"></i>Exercise 5.6.1</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.6.2"><i class="fa fa-check"></i>Exercise 5.6.2</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.6.3"><i class="fa fa-check"></i>Exercise 5.6.3</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.6.4"><i class="fa fa-check"></i>Exercise 5.6.4</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.6.5"><i class="fa fa-check"></i>Exercise 5.6.5</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.6.6"><i class="fa fa-check"></i>Exercise 5.6.6</a></li>
</ul>
</li>
<li class="chapter" data-level="5.7" data-path="transform.html">
<a href="transform.html#grouped-mutates-and-filters"><i class="fa fa-check"></i><b>5.7</b> Grouped mutates (and filters)</a><ul>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.7.1"><i class="fa fa-check"></i>Exercise 5.7.1</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.7.2"><i class="fa fa-check"></i>Exercise 5.7.2</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.7.3"><i class="fa fa-check"></i>Exercise 5.7.3</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.7.4"><i class="fa fa-check"></i>Exercise 5.7.4</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.7.5"><i class="fa fa-check"></i>Exercise 5.7.5</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.7.6"><i class="fa fa-check"></i>Exercise 5.7.6</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.7.7"><i class="fa fa-check"></i>Exercise 5.7.7</a></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#exercise-5.7.8"><i class="fa fa-check"></i>Exercise 5.7.8</a></li>
</ul>
</li>
</ul>
</li>
<li class="chapter" data-level="6" data-path="workflow-scripts.html">
<a href="workflow-scripts.html"><i class="fa fa-check"></i><b>6</b> Workflow: scripts</a><ul>
<li class="chapter" data-level="" data-path="workflow-scripts.html"><a href="workflow-scripts.html#exercise-6.1"><i class="fa fa-check"></i>Exercise 6.1</a></li>
<li class="chapter" data-level="" data-path="workflow-scripts.html"><a href="workflow-scripts.html#exercise-6.2"><i class="fa fa-check"></i>Exercise 6.2</a></li>
</ul>
</li>
<li class="chapter" data-level="7" data-path="exploratory-data-analysis.html">
<a href="exploratory-data-analysis.html"><i class="fa fa-check"></i><b>7</b> Exploratory Data Analysis</a><ul>
<li class="chapter" data-level="7.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#introduction-3"><i class="fa fa-check"></i><b>7.1</b> Introduction</a></li>
<li class="chapter" data-level="7.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#questions"><i class="fa fa-check"></i><b>7.2</b> Questions</a></li>
<li class="chapter" data-level="7.3" data-path="exploratory-data-analysis.html">
<a href="exploratory-data-analysis.html#variation"><i class="fa fa-check"></i><b>7.3</b> Variation</a><ul>
<li class="chapter" data-level="" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#exercise-7.3.1"><i class="fa fa-check"></i>Exercise 7.3.1</a></li>
<li class="chapter" data-level="" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#exercise-7.3.2"><i class="fa fa-check"></i>Exercise 7.3.2</a></li>
<li class="chapter" data-level="" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#exercise-7.3.3"><i class="fa fa-check"></i>Exercise 7.3.3</a></li>
<li class="chapter" data-level="" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#exercise-7.3.4"><i class="fa fa-check"></i>Exercise 7.3.4</a></li>
</ul>
</li>
<li class="chapter" data-level="7.4" data-path="exploratory-data-analysis.html">
<a href="exploratory-data-analysis.html#missing-values-2"><i class="fa fa-check"></i><b>7.4</b> Missing values</a><ul>
<li class="chapter" data-level="" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#exercise-7.4.1"><i class="fa fa-check"></i>Exercise 7.4.1</a></li>
<li class="chapter" data-level="" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#exercise-7.4.2"><i class="fa fa-check"></i>Exercise 7.4.2</a></li>
</ul>
</li>
<li class="chapter" data-level="7.5" data-path="exploratory-data-analysis.html">
<a href="exploratory-data-analysis.html#covariation"><i class="fa fa-check"></i><b>7.5</b> Covariation</a><ul>
<li class="chapter" data-level="7.5.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#a-categorical-and-continuous-variable"><i class="fa fa-check"></i><b>7.5.1</b> A categorical and continuous variable</a></li>
<li class="chapter" data-level="7.5.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#two-categorical-variables"><i class="fa fa-check"></i><b>7.5.2</b> Two categorical variables</a></li>
<li class="chapter" data-level="7.5.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#two-continuous-variables"><i class="fa fa-check"></i><b>7.5.3</b> Two continuous variables</a></li>
</ul>
</li>
<li class="chapter" data-level="7.6" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#patterns-and-models"><i class="fa fa-check"></i><b>7.6</b> Patterns and models</a></li>
<li class="chapter" data-level="7.7" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#ggplot2-calls"><i class="fa fa-check"></i><b>7.7</b> ggplot2 calls</a></li>
<li class="chapter" data-level="7.8" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#learning-more"><i class="fa fa-check"></i><b>7.8</b> Learning more</a></li>
</ul>
</li>
<li class="chapter" data-level="8" data-path="workflow-projects.html"><a href="workflow-projects.html"><i class="fa fa-check"></i><b>8</b> Workflow: projects</a></li>
<li class="part"><span><b>II Wrangle</b></span></li>
<li class="chapter" data-level="9" data-path="wrangle-intro.html"><a href="wrangle-intro.html"><i class="fa fa-check"></i><b>9</b> Introduction</a></li>
<li class="chapter" data-level="10" data-path="tibbles.html">
<a href="tibbles.html"><i class="fa fa-check"></i><b>10</b> Tibbles</a><ul>
<li class="chapter" data-level="" data-path="tibbles.html"><a href="tibbles.html#exercise-10.1"><i class="fa fa-check"></i>Exercise 10.1</a></li>
<li class="chapter" data-level="" data-path="tibbles.html"><a href="tibbles.html#exercise-10.2"><i class="fa fa-check"></i>Exercise 10.2</a></li>
<li class="chapter" data-level="" data-path="tibbles.html"><a href="tibbles.html#exercise-10.3"><i class="fa fa-check"></i>Exercise 10.3</a></li>
<li class="chapter" data-level="" data-path="tibbles.html"><a href="tibbles.html#exercise-10.4"><i class="fa fa-check"></i>Exercise 10.4</a></li>
<li class="chapter" data-level="" data-path="tibbles.html"><a href="tibbles.html#exercise-10.5"><i class="fa fa-check"></i>Exercise 10.5</a></li>
<li class="chapter" data-level="" data-path="tibbles.html"><a href="tibbles.html#exercise-10.6"><i class="fa fa-check"></i>Exercise 10.6</a></li>
</ul>
</li>
<li class="chapter" data-level="11" data-path="data-import.html">
<a href="data-import.html"><i class="fa fa-check"></i><b>11</b> Data import</a><ul>
<li class="chapter" data-level="11.1" data-path="data-import.html"><a href="data-import.html#introduction-5"><i class="fa fa-check"></i><b>11.1</b> Introduction</a></li>
<li class="chapter" data-level="11.2" data-path="data-import.html">
<a href="data-import.html#getting-started"><i class="fa fa-check"></i><b>11.2</b> Getting started</a><ul>
<li class="chapter" data-level="" data-path="data-import.html"><a href="data-import.html#exercise-11.2.1"><i class="fa fa-check"></i>Exercise 11.2.1</a></li>
<li class="chapter" data-level="" data-path="data-import.html"><a href="data-import.html#exercise-11.2.2"><i class="fa fa-check"></i>Exercise 11.2.2</a></li>
<li class="chapter" data-level="" data-path="data-import.html"><a href="data-import.html#exercise-11.2.3"><i class="fa fa-check"></i>Exercise 11.2.3</a></li>
<li class="chapter" data-level="" data-path="data-import.html"><a href="data-import.html#exercise-11.2.4"><i class="fa fa-check"></i>Exercise 11.2.4</a></li>
<li class="chapter" data-level="" data-path="data-import.html"><a href="data-import.html#exercise-11.2.5"><i class="fa fa-check"></i>Exercise 11.2.5</a></li>
</ul>
</li>
<li class="chapter" data-level="11.3" data-path="data-import.html">
<a href="data-import.html#parsing-a-vector"><i class="fa fa-check"></i><b>11.3</b> Parsing a vector</a><ul>
<li class="chapter" data-level="" data-path="data-import.html"><a href="data-import.html#exercise-11.3.1"><i class="fa fa-check"></i>Exercise 11.3.1</a></li>
<li class="chapter" data-level="" data-path="data-import.html"><a href="data-import.html#exercise-11.3.2"><i class="fa fa-check"></i>Exercise 11.3.2</a></li>
<li class="chapter" data-level="" data-path="data-import.html"><a href="data-import.html#exercise-11.3.3"><i class="fa fa-check"></i>Exercise 11.3.3</a></li>
<li class="chapter" data-level="" data-path="data-import.html"><a href="data-import.html#exercise-11.3.4"><i class="fa fa-check"></i>Exercise 11.3.4</a></li>
<li class="chapter" data-level="" data-path="data-import.html"><a href="data-import.html#exercise-11.3.5"><i class="fa fa-check"></i>Exercise 11.3.5</a></li>
<li class="chapter" data-level="" data-path="data-import.html"><a href="data-import.html#exercise-11.3.6"><i class="fa fa-check"></i>Exercise 11.3.6</a></li>
<li class="chapter" data-level="" data-path="data-import.html"><a href="data-import.html#exercise-11.3.7"><i class="fa fa-check"></i>Exercise 11.3.7</a></li>
</ul>
</li>
<li class="chapter" data-level="11.4" data-path="data-import.html"><a href="data-import.html#parsing-a-file"><i class="fa fa-check"></i><b>11.4</b> Parsing a file</a></li>
<li class="chapter" data-level="11.5" data-path="data-import.html"><a href="data-import.html#writing-to-a-file"><i class="fa fa-check"></i><b>11.5</b> Writing to a file</a></li>
<li class="chapter" data-level="11.6" data-path="data-import.html"><a href="data-import.html#other-types-of-data"><i class="fa fa-check"></i><b>11.6</b> Other types of data</a></li>
</ul>
</li>
<li class="chapter" data-level="12" data-path="tidy-data.html">
<a href="tidy-data.html"><i class="fa fa-check"></i><b>12</b> Tidy data</a><ul>
<li class="chapter" data-level="12.1" data-path="tidy-data.html"><a href="tidy-data.html#introduction-6"><i class="fa fa-check"></i><b>12.1</b> Introduction</a></li>
<li class="chapter" data-level="12.2" data-path="tidy-data.html">
<a href="tidy-data.html#tidy-data-1"><i class="fa fa-check"></i><b>12.2</b> Tidy data</a><ul>
<li class="chapter" data-level="" data-path="tidy-data.html"><a href="tidy-data.html#exercise-12.2.1"><i class="fa fa-check"></i>Exercise 12.2.1</a></li>
<li class="chapter" data-level="" data-path="tidy-data.html"><a href="tidy-data.html#exercise-12.2.2"><i class="fa fa-check"></i>Exercise 12.2.2</a></li>
<li class="chapter" data-level="" data-path="tidy-data.html"><a href="tidy-data.html#exercise-12.2.3"><i class="fa fa-check"></i>Exercise 12.2.3</a></li>
</ul>
</li>
<li class="chapter" data-level="12.3" data-path="tidy-data.html">
<a href="tidy-data.html#pivoting"><i class="fa fa-check"></i><b>12.3</b> Pivoting</a><ul>
<li class="chapter" data-level="" data-path="tidy-data.html"><a href="tidy-data.html#exercise-12.3.1"><i class="fa fa-check"></i>Exercise 12.3.1</a></li>
<li class="chapter" data-level="" data-path="tidy-data.html"><a href="tidy-data.html#exercise-12.3.2"><i class="fa fa-check"></i>Exercise 12.3.2</a></li>
<li class="chapter" data-level="" data-path="tidy-data.html"><a href="tidy-data.html#exercise-12.3.3"><i class="fa fa-check"></i>Exercise 12.3.3</a></li>
<li class="chapter" data-level="" data-path="tidy-data.html"><a href="tidy-data.html#exercise-12.3.4"><i class="fa fa-check"></i>Exercise 12.3.4</a></li>
</ul>
</li>
<li class="chapter" data-level="12.4" data-path="tidy-data.html">
<a href="tidy-data.html#separating-and-uniting"><i class="fa fa-check"></i><b>12.4</b> Separating and uniting</a><ul>
<li class="chapter" data-level="" data-path="tidy-data.html"><a href="tidy-data.html#exercise-12.4.1"><i class="fa fa-check"></i>Exercise 12.4.1</a></li>
<li class="chapter" data-level="" data-path="tidy-data.html"><a href="tidy-data.html#exercise-12.4.2"><i class="fa fa-check"></i>Exercise 12.4.2</a></li>
<li class="chapter" data-level="" data-path="tidy-data.html"><a href="tidy-data.html#exercise-12.4.3"><i class="fa fa-check"></i>Exercise 12.4.3</a></li>
</ul>
</li>
<li class="chapter" data-level="12.5" data-path="tidy-data.html">
<a href="tidy-data.html#missing-values-3"><i class="fa fa-check"></i><b>12.5</b> Missing values</a><ul>
<li class="chapter" data-level="" data-path="tidy-data.html"><a href="tidy-data.html#exercise-12.5.1"><i class="fa fa-check"></i>Exercise 12.5.1</a></li>
<li class="chapter" data-level="" data-path="tidy-data.html"><a href="tidy-data.html#exercise-12.5.2"><i class="fa fa-check"></i>Exercise 12.5.2</a></li>
</ul>
</li>
<li class="chapter" data-level="12.6" data-path="tidy-data.html">
<a href="tidy-data.html#case-study"><i class="fa fa-check"></i><b>12.6</b> Case Study</a><ul>
<li class="chapter" data-level="" data-path="tidy-data.html"><a href="tidy-data.html#exercise-12.6.1"><i class="fa fa-check"></i>Exercise 12.6.1</a></li>
<li class="chapter" data-level="" data-path="tidy-data.html"><a href="tidy-data.html#exercise-12.6.2"><i class="fa fa-check"></i>Exercise 12.6.2</a></li>
<li class="chapter" data-level="" data-path="tidy-data.html"><a href="tidy-data.html#exercise-12.6.3"><i class="fa fa-check"></i>Exercise 12.6.3</a></li>
<li class="chapter" data-level="" data-path="tidy-data.html"><a href="tidy-data.html#exercise-12.6.4"><i class="fa fa-check"></i>Exercise 12.6.4</a></li>
</ul>
</li>
<li class="chapter" data-level="12.7" data-path="tidy-data.html"><a href="tidy-data.html#non-tidy-data"><i class="fa fa-check"></i><b>12.7</b> Non-tidy data</a></li>
</ul>
</li>
<li class="chapter" data-level="13" data-path="relational-data.html">
<a href="relational-data.html"><i class="fa fa-check"></i><b>13</b> Relational data</a><ul>
<li class="chapter" data-level="13.1" data-path="relational-data.html"><a href="relational-data.html#introduction-7"><i class="fa fa-check"></i><b>13.1</b> Introduction</a></li>
<li class="chapter" data-level="13.2" data-path="relational-data.html">
<a href="relational-data.html#nycflights13-relational"><i class="fa fa-check"></i><b>13.2</b> nycflights13</a><ul>
<li class="chapter" data-level="" data-path="relational-data.html"><a href="relational-data.html#exercise-13.2.1"><i class="fa fa-check"></i>Exercise 13.2.1</a></li>
<li class="chapter" data-level="" data-path="relational-data.html"><a href="relational-data.html#exercise-13.2.2"><i class="fa fa-check"></i>Exercise 13.2.2</a></li>
<li class="chapter" data-level="" data-path="relational-data.html"><a href="relational-data.html#exercise-13.2.3"><i class="fa fa-check"></i>Exercise 13.2.3</a></li>
<li class="chapter" data-level="" data-path="relational-data.html"><a href="relational-data.html#exercise-13.2.4"><i class="fa fa-check"></i>Exercise 13.2.4</a></li>
</ul>
</li>
<li class="chapter" data-level="13.3" data-path="relational-data.html">
<a href="relational-data.html#keys"><i class="fa fa-check"></i><b>13.3</b> Keys</a><ul>
<li class="chapter" data-level="" data-path="relational-data.html"><a href="relational-data.html#exercise-13.3.1"><i class="fa fa-check"></i>Exercise 13.3.1</a></li>
<li class="chapter" data-level="" data-path="relational-data.html"><a href="relational-data.html#exercise-13.3.2"><i class="fa fa-check"></i>Exercise 13.3.2</a></li>
<li class="chapter" data-level="" data-path="relational-data.html"><a href="relational-data.html#exercise-13.3.3"><i class="fa fa-check"></i>Exercise 13.3.3</a></li>
</ul>
</li>
<li class="chapter" data-level="13.4" data-path="relational-data.html">
<a href="relational-data.html#mutating-joins"><i class="fa fa-check"></i><b>13.4</b> Mutating joins</a><ul>
<li class="chapter" data-level="" data-path="relational-data.html"><a href="relational-data.html#exercise-13.4.1"><i class="fa fa-check"></i>Exercise 13.4.1</a></li>
<li class="chapter" data-level="" data-path="relational-data.html"><a href="relational-data.html#exercise-13.4.2"><i class="fa fa-check"></i>Exercise 13.4.2</a></li>
<li class="chapter" data-level="" data-path="relational-data.html"><a href="relational-data.html#exercise-13.4.3"><i class="fa fa-check"></i>Exercise 13.4.3</a></li>
<li class="chapter" data-level="" data-path="relational-data.html"><a href="relational-data.html#exercise-13.4.4"><i class="fa fa-check"></i>Exercise 13.4.4</a></li>
<li class="chapter" data-level="" data-path="relational-data.html"><a href="relational-data.html#exercise-13.4.5"><i class="fa fa-check"></i>Exercise 13.4.5</a></li>
</ul>
</li>
<li class="chapter" data-level="13.5" data-path="relational-data.html">
<a href="relational-data.html#filtering-joins"><i class="fa fa-check"></i><b>13.5</b> Filtering joins</a><ul>
<li class="chapter" data-level="" data-path="relational-data.html"><a href="relational-data.html#exercise-13.5.1"><i class="fa fa-check"></i>Exercise 13.5.1</a></li>
<li class="chapter" data-level="" data-path="relational-data.html"><a href="relational-data.html#exercise-13.5.2"><i class="fa fa-check"></i>Exercise 13.5.2</a></li>
<li class="chapter" data-level="" data-path="relational-data.html"><a href="relational-data.html#exercise-13.5.3"><i class="fa fa-check"></i>Exercise 13.5.3</a></li>
<li class="chapter" data-level="" data-path="relational-data.html"><a href="relational-data.html#exercise-13.5.4"><i class="fa fa-check"></i>Exercise 13.5.4</a></li>
<li class="chapter" data-level="" data-path="relational-data.html"><a href="relational-data.html#exercise-13.5.5"><i class="fa fa-check"></i>Exercise 13.5.5</a></li>
<li class="chapter" data-level="" data-path="relational-data.html"><a href="relational-data.html#exercise-13.5.6"><i class="fa fa-check"></i>Exercise 13.5.6</a></li>
</ul>
</li>
<li class="chapter" data-level="13.6" data-path="relational-data.html"><a href="relational-data.html#join-problems"><i class="fa fa-check"></i><b>13.6</b> Join problems</a></li>
<li class="chapter" data-level="13.7" data-path="relational-data.html"><a href="relational-data.html#set-operations"><i class="fa fa-check"></i><b>13.7</b> Set operations</a></li>
</ul>
</li>
<li class="chapter" data-level="14" data-path="strings.html">
<a href="strings.html"><i class="fa fa-check"></i><b>14</b> Strings</a><ul>
<li class="chapter" data-level="14.1" data-path="strings.html"><a href="strings.html#introduction-8"><i class="fa fa-check"></i><b>14.1</b> Introduction</a></li>
<li class="chapter" data-level="14.2" data-path="strings.html">
<a href="strings.html#string-basics"><i class="fa fa-check"></i><b>14.2</b> String basics</a><ul>
<li class="chapter" data-level="" data-path="strings.html"><a href="strings.html#exercise-14.2.1"><i class="fa fa-check"></i>Exercise 14.2.1</a></li>
<li class="chapter" data-level="" data-path="strings.html"><a href="strings.html#exercise-14.2.2"><i class="fa fa-check"></i>Exercise 14.2.2</a></li>
<li class="chapter" data-level="" data-path="strings.html"><a href="strings.html#exercise-14.2.3"><i class="fa fa-check"></i>Exercise 14.2.3</a></li>
<li class="chapter" data-level="" data-path="strings.html"><a href="strings.html#exercise-14.2.4"><i class="fa fa-check"></i>Exercise 14.2.4</a></li>
<li class="chapter" data-level="" data-path="strings.html"><a href="strings.html#exercise-14.2.5"><i class="fa fa-check"></i>Exercise 14.2.5</a></li>
<li class="chapter" data-level="" data-path="strings.html"><a href="strings.html#exercise-14.2.6"><i class="fa fa-check"></i>Exercise 14.2.6</a></li>
</ul>
</li>
<li class="chapter" data-level="14.3" data-path="strings.html">
<a href="strings.html#matching-patterns-with-regular-expressions"><i class="fa fa-check"></i><b>14.3</b> Matching patterns with regular expressions</a><ul>
<li class="chapter" data-level="14.3.1" data-path="strings.html"><a href="strings.html#basic-matches"><i class="fa fa-check"></i><b>14.3.1</b> Basic matches</a></li>
<li class="chapter" data-level="14.3.2" data-path="strings.html"><a href="strings.html#anchors"><i class="fa fa-check"></i><b>14.3.2</b> Anchors</a></li>
<li class="chapter" data-level="14.3.3" data-path="strings.html"><a href="strings.html#character-classes-and-alternatives"><i class="fa fa-check"></i><b>14.3.3</b> Character classes and alternatives</a></li>
<li class="chapter" data-level="14.3.4" data-path="strings.html"><a href="strings.html#repetition"><i class="fa fa-check"></i><b>14.3.4</b> Repetition</a></li>
<li class="chapter" data-level="14.3.5" data-path="strings.html"><a href="strings.html#grouping-and-backreferences"><i class="fa fa-check"></i><b>14.3.5</b> Grouping and backreferences</a></li>
</ul>
</li>
<li class="chapter" data-level="14.4" data-path="strings.html">
<a href="strings.html#tools"><i class="fa fa-check"></i><b>14.4</b> Tools</a><ul>
<li class="chapter" data-level="14.4.1" data-path="strings.html"><a href="strings.html#detect-matches"><i class="fa fa-check"></i><b>14.4.1</b> Detect matches</a></li>
<li class="chapter" data-level="14.4.2" data-path="strings.html"><a href="strings.html#extract-matches"><i class="fa fa-check"></i><b>14.4.2</b> Extract matches</a></li>
<li class="chapter" data-level="14.4.3" data-path="strings.html"><a href="strings.html#grouped-matches"><i class="fa fa-check"></i><b>14.4.3</b> Grouped matches</a></li>
<li class="chapter" data-level="14.4.4" data-path="strings.html"><a href="strings.html#replacing-matches"><i class="fa fa-check"></i><b>14.4.4</b> Replacing matches</a></li>
<li class="chapter" data-level="14.4.5" data-path="strings.html"><a href="strings.html#splitting"><i class="fa fa-check"></i><b>14.4.5</b> Splitting</a></li>
<li class="chapter" data-level="14.4.6" data-path="strings.html"><a href="strings.html#find-matches"><i class="fa fa-check"></i><b>14.4.6</b> Find matches</a></li>
</ul>
</li>
<li class="chapter" data-level="14.5" data-path="strings.html">
<a href="strings.html#other-types-of-pattern"><i class="fa fa-check"></i><b>14.5</b> Other types of pattern</a><ul>
<li class="chapter" data-level="" data-path="strings.html"><a href="strings.html#exercise-14.5.1"><i class="fa fa-check"></i>Exercise 14.5.1</a></li>
<li class="chapter" data-level="" data-path="strings.html"><a href="strings.html#exercise-14.5.2"><i class="fa fa-check"></i>Exercise 14.5.2</a></li>
</ul>
</li>
<li class="chapter" data-level="14.6" data-path="strings.html"><a href="strings.html#other-uses-of-regular-expressions"><i class="fa fa-check"></i><b>14.6</b> Other uses of regular expressions</a></li>
<li class="chapter" data-level="14.7" data-path="strings.html">
<a href="strings.html#stringi"><i class="fa fa-check"></i><b>14.7</b> stringi</a><ul>
<li class="chapter" data-level="" data-path="strings.html"><a href="strings.html#exercise-14.7.1"><i class="fa fa-check"></i>Exercise 14.7.1</a></li>
<li class="chapter" data-level="" data-path="strings.html"><a href="strings.html#exercise-14.7.2"><i class="fa fa-check"></i>Exercise 14.7.2</a></li>
</ul>
</li>
</ul>
</li>
<li class="chapter" data-level="15" data-path="factors.html">
<a href="factors.html"><i class="fa fa-check"></i><b>15</b> Factors</a><ul>
<li class="chapter" data-level="15.1" data-path="factors.html"><a href="factors.html#introduction-9"><i class="fa fa-check"></i><b>15.1</b> Introduction</a></li>
<li class="chapter" data-level="15.2" data-path="factors.html"><a href="factors.html#creating-factors"><i class="fa fa-check"></i><b>15.2</b> Creating factors</a></li>
<li class="chapter" data-level="15.3" data-path="factors.html">
<a href="factors.html#general-social-survey"><i class="fa fa-check"></i><b>15.3</b> General Social Survey</a><ul>
<li class="chapter" data-level="" data-path="factors.html"><a href="factors.html#exercise-15.3.1"><i class="fa fa-check"></i>Exercise 15.3.1</a></li>
<li class="chapter" data-level="" data-path="factors.html"><a href="factors.html#exercise-15.3.2"><i class="fa fa-check"></i>Exercise 15.3.2</a></li>
<li class="chapter" data-level="" data-path="factors.html"><a href="factors.html#exercise-15.3.3"><i class="fa fa-check"></i>Exercise 15.3.3</a></li>
</ul>
</li>
<li class="chapter" data-level="15.4" data-path="factors.html">
<a href="factors.html#modifying-factor-order"><i class="fa fa-check"></i><b>15.4</b> Modifying factor order</a><ul>
<li class="chapter" data-level="" data-path="factors.html"><a href="factors.html#exercise-15.4.1"><i class="fa fa-check"></i>Exercise 15.4.1</a></li>
<li class="chapter" data-level="" data-path="factors.html"><a href="factors.html#exercise-15.4.2"><i class="fa fa-check"></i>Exercise 15.4.2</a></li>
<li class="chapter" data-level="" data-path="factors.html"><a href="factors.html#exercise-15.4.3"><i class="fa fa-check"></i>Exercise 15.4.3</a></li>
</ul>
</li>
<li class="chapter" data-level="15.5" data-path="factors.html">
<a href="factors.html#modifying-factor-levels"><i class="fa fa-check"></i><b>15.5</b> Modifying factor levels</a><ul>
<li class="chapter" data-level="" data-path="factors.html"><a href="factors.html#exercise-15.5.1"><i class="fa fa-check"></i>Exercise 15.5.1</a></li>
<li class="chapter" data-level="" data-path="factors.html"><a href="factors.html#exercise-15.5.2"><i class="fa fa-check"></i>Exercise 15.5.2</a></li>
</ul>
</li>
</ul>
</li>
<li class="chapter" data-level="16" data-path="dates-and-times.html">
<a href="dates-and-times.html"><i class="fa fa-check"></i><b>16</b> Dates and times</a><ul>
<li class="chapter" data-level="16.1" data-path="dates-and-times.html"><a href="dates-and-times.html#introduction-10"><i class="fa fa-check"></i><b>16.1</b> Introduction</a></li>
<li class="chapter" data-level="16.2" data-path="dates-and-times.html">
<a href="dates-and-times.html#creating-datetimes"><i class="fa fa-check"></i><b>16.2</b> Creating date/times</a><ul>
<li class="chapter" data-level="" data-path="dates-and-times.html"><a href="dates-and-times.html#exercise-16.2.1"><i class="fa fa-check"></i>Exercise 16.2.1</a></li>
<li class="chapter" data-level="" data-path="dates-and-times.html"><a href="dates-and-times.html#exercise-16.2.2"><i class="fa fa-check"></i>Exercise 16.2.2</a></li>
<li class="chapter" data-level="" data-path="dates-and-times.html"><a href="dates-and-times.html#exercise-16.2.3"><i class="fa fa-check"></i>Exercise 16.2.3</a></li>
</ul>
</li>
<li class="chapter" data-level="16.3" data-path="dates-and-times.html">
<a href="dates-and-times.html#date-time-components"><i class="fa fa-check"></i><b>16.3</b> Date-time components</a><ul>
<li class="chapter" data-level="" data-path="dates-and-times.html"><a href="dates-and-times.html#exercise-16.3.1"><i class="fa fa-check"></i>Exercise 16.3.1</a></li>
<li class="chapter" data-level="" data-path="dates-and-times.html"><a href="dates-and-times.html#exercise-16.3.2"><i class="fa fa-check"></i>Exercise 16.3.2</a></li>
<li class="chapter" data-level="" data-path="dates-and-times.html"><a href="dates-and-times.html#exercise-16.3.3"><i class="fa fa-check"></i>Exercise 16.3.3</a></li>
<li class="chapter" data-level="" data-path="dates-and-times.html"><a href="dates-and-times.html#exercise-16.3.4"><i class="fa fa-check"></i>Exercise 16.3.4</a></li>
<li class="chapter" data-level="" data-path="dates-and-times.html"><a href="dates-and-times.html#exercise-16.3.5"><i class="fa fa-check"></i>Exercise 16.3.5</a></li>
<li class="chapter" data-level="" data-path="dates-and-times.html"><a href="dates-and-times.html#exercise-16.3.6"><i class="fa fa-check"></i>Exercise 16.3.6</a></li>
<li class="chapter" data-level="" data-path="dates-and-times.html"><a href="dates-and-times.html#exercise-16.3.7"><i class="fa fa-check"></i>Exercise 16.3.7</a></li>
</ul>
</li>
<li class="chapter" data-level="16.4" data-path="dates-and-times.html">
<a href="dates-and-times.html#time-spans"><i class="fa fa-check"></i><b>16.4</b> Time spans</a><ul>
<li class="chapter" data-level="" data-path="dates-and-times.html"><a href="dates-and-times.html#exercise-16.4.1"><i class="fa fa-check"></i>Exercise 16.4.1</a></li>
<li class="chapter" data-level="" data-path="dates-and-times.html"><a href="dates-and-times.html#exercise-16.4.2"><i class="fa fa-check"></i>Exercise 16.4.2</a></li>
<li class="chapter" data-level="" data-path="dates-and-times.html"><a href="dates-and-times.html#exercise-16.4.3"><i class="fa fa-check"></i>Exercise 16.4.3</a></li>
<li class="chapter" data-level="" data-path="dates-and-times.html"><a href="dates-and-times.html#exercise-16.4.4"><i class="fa fa-check"></i>Exercise 16.4.4</a></li>
<li class="chapter" data-level="" data-path="dates-and-times.html"><a href="dates-and-times.html#exercise-16.4.5"><i class="fa fa-check"></i>Exercise 16.4.5</a></li>
</ul>
</li>
<li class="chapter" data-level="16.5" data-path="dates-and-times.html"><a href="dates-and-times.html#time-zones"><i class="fa fa-check"></i><b>16.5</b> Time zones</a></li>
</ul>
</li>
<li class="part"><span><b>III Program</b></span></li>
<li class="chapter" data-level="17" data-path="program-intro.html"><a href="program-intro.html"><i class="fa fa-check"></i><b>17</b> Introduction</a></li>
<li class="chapter" data-level="18" data-path="pipes.html"><a href="pipes.html"><i class="fa fa-check"></i><b>18</b> Pipes</a></li>
<li class="chapter" data-level="19" data-path="functions.html">
<a href="functions.html"><i class="fa fa-check"></i><b>19</b> Functions</a><ul>
<li class="chapter" data-level="19.1" data-path="functions.html"><a href="functions.html#introduction-12"><i class="fa fa-check"></i><b>19.1</b> Introduction</a></li>
<li class="chapter" data-level="19.2" data-path="functions.html">
<a href="functions.html#when-should-you-write-a-function"><i class="fa fa-check"></i><b>19.2</b> When should you write a function?</a><ul>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-19.2.1"><i class="fa fa-check"></i>Exercise 19.2.1</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-19.2.2"><i class="fa fa-check"></i>Exercise 19.2.2</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-19.2.3"><i class="fa fa-check"></i>Exercise 19.2.3</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-19.2.4"><i class="fa fa-check"></i>Exercise 19.2.4</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-19.2.5"><i class="fa fa-check"></i>Exercise 19.2.5</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-19.2.6"><i class="fa fa-check"></i>Exercise 19.2.6</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-19.2.7"><i class="fa fa-check"></i>Exercise 19.2.7</a></li>
</ul>
</li>
<li class="chapter" data-level="19.3" data-path="functions.html">
<a href="functions.html#functions-are-for-humans-and-computers"><i class="fa fa-check"></i><b>19.3</b> Functions are for humans and computers</a><ul>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-19.3.1"><i class="fa fa-check"></i>Exercise 19.3.1</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-19.3.2"><i class="fa fa-check"></i>Exercise 19.3.2</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-19.3.3"><i class="fa fa-check"></i>Exercise 19.3.3</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-19.3.4"><i class="fa fa-check"></i>Exercise 19.3.4</a></li>
</ul>
</li>
<li class="chapter" data-level="19.4" data-path="functions.html">
<a href="functions.html#conditional-execution"><i class="fa fa-check"></i><b>19.4</b> Conditional execution</a><ul>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-19.4.1"><i class="fa fa-check"></i>Exercise 19.4.1</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-19.4.2"><i class="fa fa-check"></i>Exercise 19.4.2</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-19.4.3"><i class="fa fa-check"></i>Exercise 19.4.3</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-19.4.4"><i class="fa fa-check"></i>Exercise 19.4.4</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-19.4.5"><i class="fa fa-check"></i>Exercise 19.4.5</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-19.4.6"><i class="fa fa-check"></i>Exercise 19.4.6</a></li>
</ul>
</li>
<li class="chapter" data-level="19.5" data-path="functions.html">
<a href="functions.html#function-arguments"><i class="fa fa-check"></i><b>19.5</b> Function arguments</a><ul>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-19.5.1"><i class="fa fa-check"></i>Exercise 19.5.1</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-19.5.2"><i class="fa fa-check"></i>Exercise 19.5.2</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-19.5.3"><i class="fa fa-check"></i>Exercise 19.5.3</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-19.5.4"><i class="fa fa-check"></i>Exercise 19.5.4</a></li>
</ul>
</li>
<li class="chapter" data-level="19.6" data-path="functions.html"><a href="functions.html#return-values"><i class="fa fa-check"></i><b>19.6</b> Return values</a></li>
<li class="chapter" data-level="19.7" data-path="functions.html"><a href="functions.html#environment"><i class="fa fa-check"></i><b>19.7</b> Environment</a></li>
</ul>
</li>
<li class="chapter" data-level="20" data-path="vectors.html">
<a href="vectors.html"><i class="fa fa-check"></i><b>20</b> Vectors</a><ul>
<li class="chapter" data-level="20.1" data-path="vectors.html"><a href="vectors.html#introduction-13"><i class="fa fa-check"></i><b>20.1</b> Introduction</a></li>
<li class="chapter" data-level="20.2" data-path="vectors.html"><a href="vectors.html#vector-basics"><i class="fa fa-check"></i><b>20.2</b> Vector basics</a></li>
<li class="chapter" data-level="20.3" data-path="vectors.html">
<a href="vectors.html#important-types-of-atomic-vector"><i class="fa fa-check"></i><b>20.3</b> Important types of atomic vector</a><ul>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#exercise-20.3.1"><i class="fa fa-check"></i>Exercise 20.3.1</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#exercise-20.3.2"><i class="fa fa-check"></i>Exercise 20.3.2</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#exercise-20.3.3"><i class="fa fa-check"></i>Exercise 20.3.3</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#exercise-20.3.4"><i class="fa fa-check"></i>Exercise 20.3.4</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#exercise-20.3.5"><i class="fa fa-check"></i>Exercise 20.3.5</a></li>
</ul>
</li>
<li class="chapter" data-level="20.4" data-path="vectors.html">
<a href="vectors.html#using-atomic-vectors"><i class="fa fa-check"></i><b>20.4</b> Using atomic vectors</a><ul>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#exercise-20.4.1"><i class="fa fa-check"></i>Exercise 20.4.1</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#exercise-20.4.2"><i class="fa fa-check"></i>Exercise 20.4.2</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#exercise-20.4.3"><i class="fa fa-check"></i>Exercise 20.4.3</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#exercise-20.4.4"><i class="fa fa-check"></i>Exercise 20.4.4</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#exercise-20.4.5"><i class="fa fa-check"></i>Exercise 20.4.5</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#exercise-20.4.6"><i class="fa fa-check"></i>Exercise 20.4.6</a></li>
</ul>
</li>
<li class="chapter" data-level="20.5" data-path="vectors.html">
<a href="vectors.html#lists"><i class="fa fa-check"></i><b>20.5</b> Recursive vectors (lists)</a><ul>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#exercise-20.5.1"><i class="fa fa-check"></i>Exercise 20.5.1</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#exercise-20.5.2"><i class="fa fa-check"></i>Exercise 20.5.2</a></li>
</ul>
</li>
<li class="chapter" data-level="20.6" data-path="vectors.html"><a href="vectors.html#attributes"><i class="fa fa-check"></i><b>20.6</b> Attributes</a></li>
<li class="chapter" data-level="20.7" data-path="vectors.html">
<a href="vectors.html#augmented-vectors"><i class="fa fa-check"></i><b>20.7</b> Augmented vectors</a><ul>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#exercise-20.7.1"><i class="fa fa-check"></i>Exercise 20.7.1</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#exercise-20.7.2"><i class="fa fa-check"></i>Exercise 20.7.2</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#exercise-20.7.3"><i class="fa fa-check"></i>Exercise 20.7.3</a></li>
</ul>
</li>
</ul>
</li>
<li class="chapter" data-level="21" data-path="iteration.html">
<a href="iteration.html"><i class="fa fa-check"></i><b>21</b> Iteration</a><ul>
<li class="chapter" data-level="21.1" data-path="iteration.html"><a href="iteration.html#introduction-14"><i class="fa fa-check"></i><b>21.1</b> Introduction</a></li>
<li class="chapter" data-level="21.2" data-path="iteration.html">
<a href="iteration.html#for-loops"><i class="fa fa-check"></i><b>21.2</b> For loops</a><ul>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html#exercise-21.2.1"><i class="fa fa-check"></i>Exercise 21.2.1</a></li>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html#exercise-21.2.2"><i class="fa fa-check"></i>Exercise 21.2.2</a></li>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html#exercise-21.2.3"><i class="fa fa-check"></i>Exercise 21.2.3</a></li>
</ul>
</li>
<li class="chapter" data-level="21.3" data-path="iteration.html">
<a href="iteration.html#for-loop-variations"><i class="fa fa-check"></i><b>21.3</b> For loop variations</a><ul>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html#exercise-21.3.1"><i class="fa fa-check"></i>Exercise 21.3.1</a></li>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html#exercise-21.3.2"><i class="fa fa-check"></i>Exercise 21.3.2</a></li>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html#exercise-21.3.3"><i class="fa fa-check"></i>Exercise 21.3.3</a></li>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html#exercise-21.3.4"><i class="fa fa-check"></i>Exercise 21.3.4</a></li>
</ul>
</li>
<li class="chapter" data-level="21.4" data-path="iteration.html">
<a href="iteration.html#for-loops-vs.functionals"><i class="fa fa-check"></i><b>21.4</b> For loops vs. functionals</a><ul>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html#exercise-21.4.1"><i class="fa fa-check"></i>Exercise 21.4.1</a></li>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html#exercise-21.4.2"><i class="fa fa-check"></i>Exercise 21.4.2</a></li>
</ul>
</li>
<li class="chapter" data-level="21.5" data-path="iteration.html">
<a href="iteration.html#the-map-functions"><i class="fa fa-check"></i><b>21.5</b> The map functions</a><ul>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html#exercise-21.5.1"><i class="fa fa-check"></i>Exercise 21.5.1</a></li>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html#exercise-21.5.2"><i class="fa fa-check"></i>Exercise 21.5.2</a></li>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html#exercise-21.5.3"><i class="fa fa-check"></i>Exercise 21.5.3</a></li>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html#exercise-21.5.4"><i class="fa fa-check"></i>Exercise 21.5.4</a></li>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html#exercise-21.5.5"><i class="fa fa-check"></i>Exercise 21.5.5</a></li>
</ul>
</li>
<li class="chapter" data-level="21.6" data-path="iteration.html"><a href="iteration.html#dealing-with-failure"><i class="fa fa-check"></i><b>21.6</b> Dealing with failure</a></li>
<li class="chapter" data-level="21.7" data-path="iteration.html"><a href="iteration.html#mapping-over-multiple-arguments"><i class="fa fa-check"></i><b>21.7</b> Mapping over multiple arguments</a></li>
<li class="chapter" data-level="21.8" data-path="iteration.html"><a href="iteration.html#walk"><i class="fa fa-check"></i><b>21.8</b> Walk</a></li>
<li class="chapter" data-level="21.9" data-path="iteration.html">
<a href="iteration.html#other-patterns-of-for-loops"><i class="fa fa-check"></i><b>21.9</b> Other patterns of for loops</a><ul>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html#exercise-21.9.1"><i class="fa fa-check"></i>Exercise 21.9.1</a></li>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html#exercise-21.9.2"><i class="fa fa-check"></i>Exercise 21.9.2</a></li>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html#exercise-21.9.3"><i class="fa fa-check"></i>Exercise 21.9.3</a></li>
</ul>
</li>
</ul>
</li>
<li class="part"><span><b>IV Model</b></span></li>
<li class="chapter" data-level="22" data-path="model-intro.html"><a href="model-intro.html"><i class="fa fa-check"></i><b>22</b> Introduction</a></li>
<li class="chapter" data-level="23" data-path="model-basics.html">
<a href="model-basics.html"><i class="fa fa-check"></i><b>23</b> Model basics</a><ul>
<li class="chapter" data-level="23.1" data-path="model-basics.html"><a href="model-basics.html#introduction-15"><i class="fa fa-check"></i><b>23.1</b> Introduction</a></li>
<li class="chapter" data-level="23.2" data-path="model-basics.html">
<a href="model-basics.html#a-simple-model"><i class="fa fa-check"></i><b>23.2</b> A simple model</a><ul>
<li class="chapter" data-level="" data-path="model-basics.html"><a href="model-basics.html#exercise-23.2.1"><i class="fa fa-check"></i>Exercise 23.2.1</a></li>
<li class="chapter" data-level="" data-path="model-basics.html"><a href="model-basics.html#exercise-23.2.2"><i class="fa fa-check"></i>Exercise 23.2.2</a></li>
<li class="chapter" data-level="" data-path="model-basics.html"><a href="model-basics.html#exercise-23.2.3"><i class="fa fa-check"></i>Exercise 23.2.3</a></li>
</ul>
</li>
<li class="chapter" data-level="23.3" data-path="model-basics.html">
<a href="model-basics.html#visualising-models"><i class="fa fa-check"></i><b>23.3</b> Visualising models</a><ul>
<li class="chapter" data-level="" data-path="model-basics.html"><a href="model-basics.html#exercise-23.3.1"><i class="fa fa-check"></i>Exercise 23.3.1</a></li>
<li class="chapter" data-level="" data-path="model-basics.html"><a href="model-basics.html#exercise-23.3.2"><i class="fa fa-check"></i>Exercise 23.3.2</a></li>
<li class="chapter" data-level="" data-path="model-basics.html"><a href="model-basics.html#exercise-23.3.3"><i class="fa fa-check"></i>Exercise 23.3.3</a></li>
<li class="chapter" data-level="" data-path="model-basics.html"><a href="model-basics.html#exercise-23.3.4"><i class="fa fa-check"></i>Exercise 23.3.4</a></li>
</ul>
</li>
<li class="chapter" data-level="23.4" data-path="model-basics.html">
<a href="model-basics.html#formulas-and-model-families"><i class="fa fa-check"></i><b>23.4</b> Formulas and model families</a><ul>
<li class="chapter" data-level="" data-path="model-basics.html"><a href="model-basics.html#exercise-23.4.1"><i class="fa fa-check"></i>Exercise 23.4.1</a></li>
<li class="chapter" data-level="" data-path="model-basics.html"><a href="model-basics.html#exercise-23.4.2"><i class="fa fa-check"></i>Exercise 23.4.2</a></li>
<li class="chapter" data-level="" data-path="model-basics.html"><a href="model-basics.html#exercise-23.4.3"><i class="fa fa-check"></i>Exercise 23.4.3</a></li>
<li class="chapter" data-level="" data-path="model-basics.html"><a href="model-basics.html#exercise-23.4.4"><i class="fa fa-check"></i>Exercise 23.4.4</a></li>
</ul>
</li>
<li class="chapter" data-level="23.5" data-path="model-basics.html"><a href="model-basics.html#missing-values-5"><i class="fa fa-check"></i><b>23.5</b> Missing values</a></li>
<li class="chapter" data-level="23.6" data-path="model-basics.html"><a href="model-basics.html#other-model-families"><i class="fa fa-check"></i><b>23.6</b> Other model families</a></li>
</ul>
</li>
<li class="chapter" data-level="24" data-path="model-building.html">
<a href="model-building.html"><i class="fa fa-check"></i><b>24</b> Model building</a><ul>
<li class="chapter" data-level="24.1" data-path="model-building.html"><a href="model-building.html#introduction-16"><i class="fa fa-check"></i><b>24.1</b> Introduction</a></li>
<li class="chapter" data-level="24.2" data-path="model-building.html">
<a href="model-building.html#diamond-prices"><i class="fa fa-check"></i><b>24.2</b> Why are low quality diamonds more expensive?</a><ul>
<li class="chapter" data-level="" data-path="model-building.html"><a href="model-building.html#exercise-24.2.1"><i class="fa fa-check"></i>Exercise 24.2.1</a></li>
<li class="chapter" data-level="" data-path="model-building.html"><a href="model-building.html#exercise-24.2.2"><i class="fa fa-check"></i>Exercise 24.2.2</a></li>
<li class="chapter" data-level="" data-path="model-building.html"><a href="model-building.html#exercise-24.2.3"><i class="fa fa-check"></i>Exercise 24.2.3</a></li>
<li class="chapter" data-level="" data-path="model-building.html"><a href="model-building.html#exercise-24.2.4"><i class="fa fa-check"></i>Exercise 24.2.4</a></li>
</ul>
</li>
<li class="chapter" data-level="24.3" data-path="model-building.html">
<a href="model-building.html#what-affects-the-number-of-daily-flights"><i class="fa fa-check"></i><b>24.3</b> What affects the number of daily flights?</a><ul>
<li class="chapter" data-level="" data-path="model-building.html"><a href="model-building.html#exercise-24.3.1"><i class="fa fa-check"></i>Exercise 24.3.1</a></li>
<li class="chapter" data-level="" data-path="model-building.html"><a href="model-building.html#exercise-24.3.2"><i class="fa fa-check"></i>Exercise 24.3.2</a></li>
<li class="chapter" data-level="" data-path="model-building.html"><a href="model-building.html#exercise-24.3.3"><i class="fa fa-check"></i>Exercise 24.3.3</a></li>
<li class="chapter" data-level="" data-path="model-building.html"><a href="model-building.html#exercise-24.3.4"><i class="fa fa-check"></i>Exercise 24.3.4</a></li>
<li class="chapter" data-level="" data-path="model-building.html"><a href="model-building.html#exercise-24.3.5"><i class="fa fa-check"></i>Exercise 24.3.5</a></li>
<li class="chapter" data-level="" data-path="model-building.html"><a href="model-building.html#exercise-24.3.6"><i class="fa fa-check"></i>Exercise 24.3.6</a></li>
<li class="chapter" data-level="" data-path="model-building.html"><a href="model-building.html#exercise-24.3.7"><i class="fa fa-check"></i>Exercise 24.3.7</a></li>
<li class="chapter" data-level="" data-path="model-building.html"><a href="model-building.html#exercise-24.3.8"><i class="fa fa-check"></i>Exercise 24.3.8</a></li>
</ul>
</li>
<li class="chapter" data-level="24.4" data-path="model-building.html"><a href="model-building.html#learning-more-about-models"><i class="fa fa-check"></i><b>24.4</b> Learning more about models</a></li>
</ul>
</li>
<li class="chapter" data-level="25" data-path="many-models.html">
<a href="many-models.html"><i class="fa fa-check"></i><b>25</b> Many models</a><ul>
<li class="chapter" data-level="25.1" data-path="many-models.html"><a href="many-models.html#introduction-17"><i class="fa fa-check"></i><b>25.1</b> Introduction</a></li>
<li class="chapter" data-level="25.2" data-path="many-models.html">
<a href="many-models.html#gapminder"><i class="fa fa-check"></i><b>25.2</b> gapminder</a><ul>
<li class="chapter" data-level="" data-path="many-models.html"><a href="many-models.html#exercise-25.2.1"><i class="fa fa-check"></i>Exercise 25.2.1</a></li>
<li class="chapter" data-level="" data-path="many-models.html"><a href="many-models.html#exercise-25.2.2"><i class="fa fa-check"></i>Exercise 25.2.2</a></li>
<li class="chapter" data-level="" data-path="many-models.html"><a href="many-models.html#exercise-25.2.3"><i class="fa fa-check"></i>Exercise 25.2.3</a></li>
</ul>
</li>
<li class="chapter" data-level="25.3" data-path="many-models.html"><a href="many-models.html#list-columns-1"><i class="fa fa-check"></i><b>25.3</b> List-columns</a></li>
<li class="chapter" data-level="25.4" data-path="many-models.html">
<a href="many-models.html#creating-list-columns"><i class="fa fa-check"></i><b>25.4</b> Creating list-columns</a><ul>
<li class="chapter" data-level="" data-path="many-models.html"><a href="many-models.html#exercise-25.4.1"><i class="fa fa-check"></i>Exercise 25.4.1</a></li>
<li class="chapter" data-level="" data-path="many-models.html"><a href="many-models.html#exercise-25.4.2"><i class="fa fa-check"></i>Exercise 25.4.2</a></li>
<li class="chapter" data-level="" data-path="many-models.html"><a href="many-models.html#exercise-25.4.3"><i class="fa fa-check"></i>Exercise 25.4.3</a></li>
<li class="chapter" data-level="" data-path="many-models.html"><a href="many-models.html#exercise-25.4.4"><i class="fa fa-check"></i>Exercise 25.4.4</a></li>
</ul>
</li>
<li class="chapter" data-level="25.5" data-path="many-models.html">
<a href="many-models.html#simplifying-list-columns"><i class="fa fa-check"></i><b>25.5</b> Simplifying list-columns</a><ul>
<li class="chapter" data-level="" data-path="many-models.html"><a href="many-models.html#exercise-25.5.1"><i class="fa fa-check"></i>Exercise 25.5.1</a></li>
<li class="chapter" data-level="" data-path="many-models.html"><a href="many-models.html#exercise-25.5.2"><i class="fa fa-check"></i>Exercise 25.5.2</a></li>
</ul>
</li>
<li class="chapter" data-level="25.6" data-path="many-models.html"><a href="many-models.html#making-tidy-data-with-broom"><i class="fa fa-check"></i><b>25.6</b> Making tidy data with broom</a></li>
</ul>
</li>
<li class="part"><span><b>V Communicate</b></span></li>
<li class="chapter" data-level="26" data-path="communicate-intro.html"><a href="communicate-intro.html"><i class="fa fa-check"></i><b>26</b> Introduction</a></li>
<li class="chapter" data-level="27" data-path="r-markdown.html">
<a href="r-markdown.html"><i class="fa fa-check"></i><b>27</b> R Markdown</a><ul>
<li class="chapter" data-level="27.1" data-path="r-markdown.html"><a href="r-markdown.html#introduction-18"><i class="fa fa-check"></i><b>27.1</b> Introduction</a></li>
<li class="chapter" data-level="27.2" data-path="r-markdown.html">
<a href="r-markdown.html#r-markdown-basics"><i class="fa fa-check"></i><b>27.2</b> R Markdown basics</a><ul>
<li class="chapter" data-level="" data-path="r-markdown.html"><a href="r-markdown.html#exercise-27.2.1"><i class="fa fa-check"></i>Exercise 27.2.1</a></li>
<li class="chapter" data-level="" data-path="r-markdown.html"><a href="r-markdown.html#exercise-27.2.2"><i class="fa fa-check"></i>Exercise 27.2.2</a></li>
<li class="chapter" data-level="" data-path="r-markdown.html"><a href="r-markdown.html#exercise-27.2.3"><i class="fa fa-check"></i>Exercise 27.2.3</a></li>
<li class="chapter" data-level="" data-path="r-markdown.html"><a href="r-markdown.html#exercise-27.2.4"><i class="fa fa-check"></i>Exercise 27.2.4</a></li>
</ul>
</li>
<li class="chapter" data-level="27.3" data-path="r-markdown.html">
<a href="r-markdown.html#text-formatting-with-markdown"><i class="fa fa-check"></i><b>27.3</b> Text formatting with Markdown</a><ul>
<li class="chapter" data-level="" data-path="r-markdown.html"><a href="r-markdown.html#exercise-27.3.1"><i class="fa fa-check"></i>Exercise 27.3.1</a></li>
<li class="chapter" data-level="" data-path="r-markdown.html"><a href="r-markdown.html#exercise-27.3.2"><i class="fa fa-check"></i>Exercise 27.3.2</a></li>
<li class="chapter" data-level="" data-path="r-markdown.html"><a href="r-markdown.html#exercise-27.3.3"><i class="fa fa-check"></i>Exercise 27.3.3</a></li>
</ul>
</li>
<li class="chapter" data-level="27.4" data-path="r-markdown.html">
<a href="r-markdown.html#code-chunks"><i class="fa fa-check"></i><b>27.4</b> Code chunks</a><ul>
<li class="chapter" data-level="" data-path="r-markdown.html"><a href="r-markdown.html#exercise-27.4.1"><i class="fa fa-check"></i>Exercise 27.4.1</a></li>
<li class="chapter" data-level="" data-path="r-markdown.html"><a href="r-markdown.html#exercise-27.4.2"><i class="fa fa-check"></i>Exercise 27.4.2</a></li>
<li class="chapter" data-level="" data-path="r-markdown.html"><a href="r-markdown.html#exercise-27.4.3"><i class="fa fa-check"></i>Exercise 27.4.3</a></li>
<li class="chapter" data-level="" data-path="r-markdown.html"><a href="r-markdown.html#exercise-27.4.4"><i class="fa fa-check"></i>Exercise 27.4.4</a></li>
</ul>
</li>
<li class="chapter" data-level="27.5" data-path="r-markdown.html"><a href="r-markdown.html#troubleshooting"><i class="fa fa-check"></i><b>27.5</b> Troubleshooting</a></li>
<li class="chapter" data-level="27.6" data-path="r-markdown.html"><a href="r-markdown.html#yaml-header"><i class="fa fa-check"></i><b>27.6</b> YAML header</a></li>
<li class="chapter" data-level="27.7" data-path="r-markdown.html"><a href="r-markdown.html#learning-more-3"><i class="fa fa-check"></i><b>27.7</b> Learning more</a></li>
</ul>
</li>
<li class="chapter" data-level="28" data-path="graphics-for-communication.html">
<a href="graphics-for-communication.html"><i class="fa fa-check"></i><b>28</b> Graphics for communication</a><ul>
<li class="chapter" data-level="28.1" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#introduction-19"><i class="fa fa-check"></i><b>28.1</b> Introduction</a></li>
<li class="chapter" data-level="28.2" data-path="graphics-for-communication.html">
<a href="graphics-for-communication.html#label"><i class="fa fa-check"></i><b>28.2</b> Label</a><ul>
<li class="chapter" data-level="" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#exercise-28.2.1"><i class="fa fa-check"></i>Exercise 28.2.1</a></li>
<li class="chapter" data-level="" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#exercise-28.2.2"><i class="fa fa-check"></i>Exercise 28.2.2</a></li>
<li class="chapter" data-level="" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#exercise-28.2.3"><i class="fa fa-check"></i>Exercise 28.2.3</a></li>
</ul>
</li>
<li class="chapter" data-level="28.3" data-path="graphics-for-communication.html">
<a href="graphics-for-communication.html#annotations"><i class="fa fa-check"></i><b>28.3</b> Annotations</a><ul>
<li class="chapter" data-level="" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#exercise-28.3.1"><i class="fa fa-check"></i>Exercise 28.3.1</a></li>
<li class="chapter" data-level="" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#exercise-28.3.2"><i class="fa fa-check"></i>Exercise 28.3.2</a></li>
<li class="chapter" data-level="" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#exercise-28.3.3"><i class="fa fa-check"></i>Exercise 28.3.3</a></li>
<li class="chapter" data-level="" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#exercise-28.3.4"><i class="fa fa-check"></i>Exercise 28.3.4</a></li>
<li class="chapter" data-level="" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#exercise-28.3.5"><i class="fa fa-check"></i>Exercise 28.3.5</a></li>
</ul>
</li>
<li class="chapter" data-level="28.4" data-path="graphics-for-communication.html">
<a href="graphics-for-communication.html#scales"><i class="fa fa-check"></i><b>28.4</b> Scales</a><ul>
<li class="chapter" data-level="" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#exercise-28.4.1"><i class="fa fa-check"></i>Exercise 28.4.1</a></li>
<li class="chapter" data-level="" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#exercise-28.4.2"><i class="fa fa-check"></i>Exercise 28.4.2</a></li>
<li class="chapter" data-level="" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#exercise-28.4.3"><i class="fa fa-check"></i>Exercise 28.4.3</a></li>
<li class="chapter" data-level="" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#exercise-28.4.4"><i class="fa fa-check"></i>Exercise 28.4.4</a></li>
</ul>
</li>
<li class="chapter" data-level="28.5" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#zooming"><i class="fa fa-check"></i><b>28.5</b> Zooming</a></li>
<li class="chapter" data-level="28.6" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#themes"><i class="fa fa-check"></i><b>28.6</b> Themes</a></li>
<li class="chapter" data-level="28.7" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#saving-your-plots"><i class="fa fa-check"></i><b>28.7</b> Saving your plots</a></li>
<li class="chapter" data-level="28.8" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#learning-more-4"><i class="fa fa-check"></i><b>28.8</b> Learning more</a></li>
</ul>
</li>
<li class="chapter" data-level="29" data-path="r-markdown-formats.html"><a href="r-markdown-formats.html"><i class="fa fa-check"></i><b>29</b> R Markdown formats</a></li>
<li class="chapter" data-level="30" data-path="r-markdown-workflow.html"><a href="r-markdown-workflow.html"><i class="fa fa-check"></i><b>30</b> R Markdown workflow</a></li>
<li class="part"><span><b>VI Appendixes</b></span></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider">
<li><a href="https://github.com/rstudio/bookdown">Proudly published with bookdown</a></li>

</ul></nav>
</div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R for Data Science: Exercise Solutions</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-"><div class="alert alert-info hints-alert">
  <div class="hints-icon">
    <i class="fa fa-comments-o"></i>
  </div>
  <div class="hints-container">
    <b>I need your help!</b>
    <p>
    If you find any typos, errors, or places where the text may be improved, please let me know.
    The best ways to provide feedback are by GitHub or hypothes.is annotations.
    </p>

    <p>
      <i class="fa fa-github"></i>
      Opening an <a href="https://github.com/jrnold/r4ds-exercise-solutions/issues">issue</a> or submitting a <a href="https://github.com/jrnold/r4ds-exercise-solutions/pulls">pull request</a> on <a href="https://github.com/jrnold/r4ds-exercise-solutions">GitHub</a>
    </p>
    <p>
      <i class="h-icon-hypothesis-logo"></i>
      Adding an annotation using <a href="https://hypothes.is">hypothes.is</a>.
      To add an annotation, <span style="background-color: #3297FD; color: white">select some text</span> and then click the
      <i class="h-icon-annotate"></i> on the pop-up menu.
      To see the annotations of others, click the
      <i class="h-icon-chevron-left"></i>
      in the upper right-hand corner of the page.
    </p>
  </div>
</div>
<div id="iteration" class="section level1 r4ds-section">
<h1>
<a href="#iteration" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a><span class="header-section-number">21</span> Iteration<a href="https://r4ds.had.co.nz/iteration.html#iteration" class="r4ds-section-link section-link" aria-hidden="true"><i class="fa fa-external-link" aria-hidden="true"></i></a>
</h1>
<div id="introduction-14" class="section level2 r4ds-section">
<h2>
<a href="#introduction-14" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a><span class="header-section-number">21.1</span> Introduction<a href="https://r4ds.had.co.nz/iteration.html#introduction-14" class="r4ds-section-link section-link" aria-hidden="true"><i class="fa fa-external-link" aria-hidden="true"></i></a>
</h2>
<div class="sourceCode" id="cb668"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb668-1" data-line-number="1"><span class="kw">library</span>(<span class="st">"tidyverse"</span>)</a>
<a class="sourceLine" id="cb668-2" data-line-number="2"><span class="kw">library</span>(<span class="st">"stringr"</span>)</a></code></pre></div>
<p>The package microbenchmark is used for timing code.</p>
<div class="sourceCode" id="cb669"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb669-1" data-line-number="1"><span class="kw">library</span>(<span class="st">"microbenchmark"</span>)</a></code></pre></div>
<div class="alert alert-warning hints-alert">
<p>The <code>map()</code> function appears in both the purrr and maps packages. See the
“Prerequisites” section of the <a href="https://r4ds.had.co.nz/data-visualisation.html#introduction-1">Introduction</a>.
If you see errors like the following, you are using the wrong <code>map()</code> function.</p>
<pre class="rconsole"><code>&gt; map(c(TRUE, FALSE, TRUE), ~ !.)
Error: $ operator is invalid for atomic vectors
&gt; map(-2:2, rnorm, n = 5)
Error in map(-2:2, rnorm, n = 5) : 
argument 3 matches multiple formal arguments</code></pre>
<p>You can check the package in which a function is defined using the <code>environment()</code> function:</p>
<div class="sourceCode" id="cb671"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb671-1" data-line-number="1"><span class="kw">environment</span>(map)</a>
<a class="sourceLine" id="cb671-2" data-line-number="2"><span class="co">#&gt; &lt;environment: namespace:purrr&gt;</span></a></code></pre></div>
<p>The result should include <code>namespace:purrr</code> if <code>map()</code> is coming from the purrr package.
To explicitly reference the package to get a function from, use the colon operator <code>::</code>.
For example,</p>
<div class="sourceCode" id="cb672"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb672-1" data-line-number="1">purrr<span class="op">::</span><span class="kw">map</span>(<span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>), <span class="op">~</span><span class="st"> </span><span class="op">!</span>.)</a>
<a class="sourceLine" id="cb672-2" data-line-number="2"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb672-3" data-line-number="3"><span class="co">#&gt; [1] FALSE</span></a>
<a class="sourceLine" id="cb672-4" data-line-number="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb672-5" data-line-number="5"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb672-6" data-line-number="6"><span class="co">#&gt; [1] TRUE</span></a>
<a class="sourceLine" id="cb672-7" data-line-number="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb672-8" data-line-number="8"><span class="co">#&gt; [[3]]</span></a>
<a class="sourceLine" id="cb672-9" data-line-number="9"><span class="co">#&gt; [1] FALSE</span></a></code></pre></div>
</div>
</div>
<div id="for-loops" class="section level2 r4ds-section">
<h2>
<a href="#for-loops" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a><span class="header-section-number">21.2</span> For loops<a href="https://r4ds.had.co.nz/iteration.html#for-loops" class="r4ds-section-link section-link" aria-hidden="true"><i class="fa fa-external-link" aria-hidden="true"></i></a>
</h2>
<div id="exercise-21.2.1" class="section level3 unnumbered exercise" data-number="21.2.1">
<h3>Exercise 21.2.1<a href="#exercise-21.2.1" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a>
</h3>
<div class="question">
<p>Write for-loops to:</p>
<ol style="list-style-type: decimal">
<li>Compute the mean of every column in <code>mtcars</code>.</li>
<li>Determine the type of each column in <code>nycflights13::flights</code>.</li>
<li>Compute the number of unique values in each column of <code>iris</code>.</li>
<li>Generate 10 random normals for each of <span class="math inline">\(\mu\)</span> = -10, 0, 10, and 100.</li>
</ol>
</div>
<div class="answer">
<p>The answers for each part are below.</p>
<ol style="list-style-type: decimal">
<li>
<p>To compute the mean of every column in <code>mtcars</code>.</p>
<div class="sourceCode" id="cb673"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb673-1" data-line-number="1">output &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="st">"double"</span>, <span class="kw">ncol</span>(mtcars))</a>
<a class="sourceLine" id="cb673-2" data-line-number="2"><span class="kw">names</span>(output) &lt;-<span class="st"> </span><span class="kw">names</span>(mtcars)</a>
<a class="sourceLine" id="cb673-3" data-line-number="3"><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">names</span>(mtcars)) {</a>
<a class="sourceLine" id="cb673-4" data-line-number="4">  output[i] &lt;-<span class="st"> </span><span class="kw">mean</span>(mtcars[[i]])</a>
<a class="sourceLine" id="cb673-5" data-line-number="5">}</a>
<a class="sourceLine" id="cb673-6" data-line-number="6">output</a>
<a class="sourceLine" id="cb673-7" data-line-number="7"><span class="co">#&gt;     mpg     cyl    disp      hp    drat      wt    qsec      vs      am    gear </span></a>
<a class="sourceLine" id="cb673-8" data-line-number="8"><span class="co">#&gt;  20.091   6.188 230.722 146.688   3.597   3.217  17.849   0.438   0.406   3.688 </span></a>
<a class="sourceLine" id="cb673-9" data-line-number="9"><span class="co">#&gt;    carb </span></a>
<a class="sourceLine" id="cb673-10" data-line-number="10"><span class="co">#&gt;   2.812</span></a></code></pre></div>
</li>
<li>
<p>Determine the type of each column in <code>nycflights13::flights</code>.</p>
<div class="sourceCode" id="cb674"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb674-1" data-line-number="1">output &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="st">"list"</span>, <span class="kw">ncol</span>(nycflights13<span class="op">::</span>flights))</a>
<a class="sourceLine" id="cb674-2" data-line-number="2"><span class="kw">names</span>(output) &lt;-<span class="st"> </span><span class="kw">names</span>(nycflights13<span class="op">::</span>flights)</a>
<a class="sourceLine" id="cb674-3" data-line-number="3"><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">names</span>(nycflights13<span class="op">::</span>flights)) {</a>
<a class="sourceLine" id="cb674-4" data-line-number="4">  output[[i]] &lt;-<span class="st"> </span><span class="kw">class</span>(nycflights13<span class="op">::</span>flights[[i]])</a>
<a class="sourceLine" id="cb674-5" data-line-number="5">}</a>
<a class="sourceLine" id="cb674-6" data-line-number="6">output</a>
<a class="sourceLine" id="cb674-7" data-line-number="7"><span class="co">#&gt; $year</span></a>
<a class="sourceLine" id="cb674-8" data-line-number="8"><span class="co">#&gt; [1] "integer"</span></a>
<a class="sourceLine" id="cb674-9" data-line-number="9"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb674-10" data-line-number="10"><span class="co">#&gt; $month</span></a>
<a class="sourceLine" id="cb674-11" data-line-number="11"><span class="co">#&gt; [1] "integer"</span></a>
<a class="sourceLine" id="cb674-12" data-line-number="12"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb674-13" data-line-number="13"><span class="co">#&gt; $day</span></a>
<a class="sourceLine" id="cb674-14" data-line-number="14"><span class="co">#&gt; [1] "integer"</span></a>
<a class="sourceLine" id="cb674-15" data-line-number="15"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb674-16" data-line-number="16"><span class="co">#&gt; $dep_time</span></a>
<a class="sourceLine" id="cb674-17" data-line-number="17"><span class="co">#&gt; [1] "integer"</span></a>
<a class="sourceLine" id="cb674-18" data-line-number="18"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb674-19" data-line-number="19"><span class="co">#&gt; $sched_dep_time</span></a>
<a class="sourceLine" id="cb674-20" data-line-number="20"><span class="co">#&gt; [1] "integer"</span></a>
<a class="sourceLine" id="cb674-21" data-line-number="21"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb674-22" data-line-number="22"><span class="co">#&gt; $dep_delay</span></a>
<a class="sourceLine" id="cb674-23" data-line-number="23"><span class="co">#&gt; [1] "numeric"</span></a>
<a class="sourceLine" id="cb674-24" data-line-number="24"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb674-25" data-line-number="25"><span class="co">#&gt; $arr_time</span></a>
<a class="sourceLine" id="cb674-26" data-line-number="26"><span class="co">#&gt; [1] "integer"</span></a>
<a class="sourceLine" id="cb674-27" data-line-number="27"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb674-28" data-line-number="28"><span class="co">#&gt; $sched_arr_time</span></a>
<a class="sourceLine" id="cb674-29" data-line-number="29"><span class="co">#&gt; [1] "integer"</span></a>
<a class="sourceLine" id="cb674-30" data-line-number="30"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb674-31" data-line-number="31"><span class="co">#&gt; $arr_delay</span></a>
<a class="sourceLine" id="cb674-32" data-line-number="32"><span class="co">#&gt; [1] "numeric"</span></a>
<a class="sourceLine" id="cb674-33" data-line-number="33"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb674-34" data-line-number="34"><span class="co">#&gt; $carrier</span></a>
<a class="sourceLine" id="cb674-35" data-line-number="35"><span class="co">#&gt; [1] "character"</span></a>
<a class="sourceLine" id="cb674-36" data-line-number="36"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb674-37" data-line-number="37"><span class="co">#&gt; $flight</span></a>
<a class="sourceLine" id="cb674-38" data-line-number="38"><span class="co">#&gt; [1] "integer"</span></a>
<a class="sourceLine" id="cb674-39" data-line-number="39"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb674-40" data-line-number="40"><span class="co">#&gt; $tailnum</span></a>
<a class="sourceLine" id="cb674-41" data-line-number="41"><span class="co">#&gt; [1] "character"</span></a>
<a class="sourceLine" id="cb674-42" data-line-number="42"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb674-43" data-line-number="43"><span class="co">#&gt; $origin</span></a>
<a class="sourceLine" id="cb674-44" data-line-number="44"><span class="co">#&gt; [1] "character"</span></a>
<a class="sourceLine" id="cb674-45" data-line-number="45"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb674-46" data-line-number="46"><span class="co">#&gt; $dest</span></a>
<a class="sourceLine" id="cb674-47" data-line-number="47"><span class="co">#&gt; [1] "character"</span></a>
<a class="sourceLine" id="cb674-48" data-line-number="48"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb674-49" data-line-number="49"><span class="co">#&gt; $air_time</span></a>
<a class="sourceLine" id="cb674-50" data-line-number="50"><span class="co">#&gt; [1] "numeric"</span></a>
<a class="sourceLine" id="cb674-51" data-line-number="51"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb674-52" data-line-number="52"><span class="co">#&gt; $distance</span></a>
<a class="sourceLine" id="cb674-53" data-line-number="53"><span class="co">#&gt; [1] "numeric"</span></a>
<a class="sourceLine" id="cb674-54" data-line-number="54"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb674-55" data-line-number="55"><span class="co">#&gt; $hour</span></a>
<a class="sourceLine" id="cb674-56" data-line-number="56"><span class="co">#&gt; [1] "numeric"</span></a>
<a class="sourceLine" id="cb674-57" data-line-number="57"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb674-58" data-line-number="58"><span class="co">#&gt; $minute</span></a>
<a class="sourceLine" id="cb674-59" data-line-number="59"><span class="co">#&gt; [1] "numeric"</span></a>
<a class="sourceLine" id="cb674-60" data-line-number="60"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb674-61" data-line-number="61"><span class="co">#&gt; $time_hour</span></a>
<a class="sourceLine" id="cb674-62" data-line-number="62"><span class="co">#&gt; [1] "POSIXct" "POSIXt"</span></a></code></pre></div>
<p>I used a <code>list</code>, not a character vector, since the class of an object can have multiple values.
For example, the class of the <code>time_hour</code> column is POSIXct, POSIXt.</p>
</li>
<li>
<p>To compute the number of unique values in each column of the <code>iris</code> dataset.</p>
<div class="sourceCode" id="cb675"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb675-1" data-line-number="1"><span class="kw">data</span>(<span class="st">"iris"</span>)</a>
<a class="sourceLine" id="cb675-2" data-line-number="2">iris_uniq &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="st">"double"</span>, <span class="kw">ncol</span>(iris))</a>
<a class="sourceLine" id="cb675-3" data-line-number="3"><span class="kw">names</span>(iris_uniq) &lt;-<span class="st"> </span><span class="kw">names</span>(iris)</a>
<a class="sourceLine" id="cb675-4" data-line-number="4"><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">names</span>(iris)) {</a>
<a class="sourceLine" id="cb675-5" data-line-number="5">  iris_uniq[i] &lt;-<span class="st"> </span><span class="kw">length</span>(<span class="kw">unique</span>(iris[[i]]))</a>
<a class="sourceLine" id="cb675-6" data-line-number="6">}</a>
<a class="sourceLine" id="cb675-7" data-line-number="7">iris_uniq</a>
<a class="sourceLine" id="cb675-8" data-line-number="8"><span class="co">#&gt; Sepal.Length  Sepal.Width Petal.Length  Petal.Width      Species </span></a>
<a class="sourceLine" id="cb675-9" data-line-number="9"><span class="co">#&gt;           35           23           43           22            3</span></a></code></pre></div>
</li>
<li>
<p>To generate 10 random normals for each of <span class="math inline">\(\mu\)</span> = -10, 0, 10, and 100.</p>
<div class="sourceCode" id="cb676"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb676-1" data-line-number="1"><span class="co"># number to draw</span></a>
<a class="sourceLine" id="cb676-2" data-line-number="2">n &lt;-<span class="st"> </span><span class="dv">10</span></a>
<a class="sourceLine" id="cb676-3" data-line-number="3"><span class="co"># values of the mean</span></a>
<a class="sourceLine" id="cb676-4" data-line-number="4">mu &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="op">-</span><span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">10</span>, <span class="dv">100</span>)</a>
<a class="sourceLine" id="cb676-5" data-line-number="5">normals &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="st">"list"</span>, <span class="kw">length</span>(mu))</a>
<a class="sourceLine" id="cb676-6" data-line-number="6"><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(normals)) {</a>
<a class="sourceLine" id="cb676-7" data-line-number="7">  normals[[i]] &lt;-<span class="st"> </span><span class="kw">rnorm</span>(n, <span class="dt">mean =</span> mu[i])</a>
<a class="sourceLine" id="cb676-8" data-line-number="8">}</a>
<a class="sourceLine" id="cb676-9" data-line-number="9">normals</a>
<a class="sourceLine" id="cb676-10" data-line-number="10"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb676-11" data-line-number="11"><span class="co">#&gt;  [1] -11.40  -9.74 -12.44 -10.01  -9.38  -8.85 -11.82 -10.25 -10.24 -10.28</span></a>
<a class="sourceLine" id="cb676-12" data-line-number="12"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb676-13" data-line-number="13"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb676-14" data-line-number="14"><span class="co">#&gt;  [1] -0.5537  0.6290  2.0650 -1.6310  0.5124 -1.8630 -0.5220 -0.0526  0.5430</span></a>
<a class="sourceLine" id="cb676-15" data-line-number="15"><span class="co">#&gt; [10] -0.9141</span></a>
<a class="sourceLine" id="cb676-16" data-line-number="16"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb676-17" data-line-number="17"><span class="co">#&gt; [[3]]</span></a>
<a class="sourceLine" id="cb676-18" data-line-number="18"><span class="co">#&gt;  [1] 10.47 10.36  8.70 10.74 11.89  9.90  9.06  9.98  9.17  8.49</span></a>
<a class="sourceLine" id="cb676-19" data-line-number="19"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb676-20" data-line-number="20"><span class="co">#&gt; [[4]]</span></a>
<a class="sourceLine" id="cb676-21" data-line-number="21"><span class="co">#&gt;  [1] 100.9 100.2 100.2 101.6 100.1  99.9  98.1  99.7  99.7 101.1</span></a></code></pre></div>
<p>However, we don’t need a for loop for this since <code>rnorm()</code> recycle the <code>mean</code> argument.</p>
<div class="sourceCode" id="cb677"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb677-1" data-line-number="1"><span class="kw">matrix</span>(<span class="kw">rnorm</span>(n <span class="op">*</span><span class="st"> </span><span class="kw">length</span>(mu), <span class="dt">mean =</span> mu), <span class="dt">ncol =</span> n)</a>
<a class="sourceLine" id="cb677-2" data-line-number="2"><span class="co">#&gt;        [,1]   [,2]  [,3]     [,4]   [,5]   [,6]    [,7]   [,8]    [,9] [,10]</span></a>
<a class="sourceLine" id="cb677-3" data-line-number="3"><span class="co">#&gt; [1,] -9.930  -9.56 -9.88 -10.2061 -12.27 -8.926 -11.178  -9.51  -8.663 -9.39</span></a>
<a class="sourceLine" id="cb677-4" data-line-number="4"><span class="co">#&gt; [2,] -0.639   2.76 -1.91   0.0192   2.68 -0.665  -0.976  -1.70   0.237 -0.11</span></a>
<a class="sourceLine" id="cb677-5" data-line-number="5"><span class="co">#&gt; [3,]  9.950  10.05 10.86  10.0296   9.64 11.114  11.065   8.53  11.318 10.17</span></a>
<a class="sourceLine" id="cb677-6" data-line-number="6"><span class="co">#&gt; [4,] 99.749 100.58 99.76 100.5498 100.21 99.754 100.132 100.28 100.524 99.91</span></a></code></pre></div>
</li>
</ol>
</div>
</div>
<div id="exercise-21.2.2" class="section level3 unnumbered exercise" data-number="21.2.2">
<h3>Exercise 21.2.2<a href="#exercise-21.2.2" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a>
</h3>
<div class="question">
<p>Eliminate the for loop in each of the following examples by taking advantage of an existing function that works with vectors:</p>
</div>
<div class="answer">
<div class="sourceCode" id="cb678"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb678-1" data-line-number="1">out &lt;-<span class="st"> ""</span></a>
<a class="sourceLine" id="cb678-2" data-line-number="2"><span class="cf">for</span> (x <span class="cf">in</span> letters) {</a>
<a class="sourceLine" id="cb678-3" data-line-number="3">  out &lt;-<span class="st"> </span><span class="kw">str_c</span>(out, x)</a>
<a class="sourceLine" id="cb678-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb678-5" data-line-number="5">out</a>
<a class="sourceLine" id="cb678-6" data-line-number="6"><span class="co">#&gt; [1] "abcdefghijklmnopqrstuvwxyz"</span></a></code></pre></div>
<p>Since <code>str_c()</code> already works with vectors, use <code>str_c()</code> with the <code>collapse</code> argument to return a single string.</p>
<div class="sourceCode" id="cb679"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb679-1" data-line-number="1"><span class="kw">str_c</span>(letters, <span class="dt">collapse =</span> <span class="st">""</span>)</a>
<a class="sourceLine" id="cb679-2" data-line-number="2"><span class="co">#&gt; [1] "abcdefghijklmnopqrstuvwxyz"</span></a></code></pre></div>
<p>For this I’m going to rename the variable <code>sd</code> to something different because <code>sd</code> is the name of the function we want to use.</p>
<div class="sourceCode" id="cb680"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb680-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">100</span>)</a>
<a class="sourceLine" id="cb680-2" data-line-number="2">sd. &lt;-<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb680-3" data-line-number="3"><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(x)) {</a>
<a class="sourceLine" id="cb680-4" data-line-number="4">  sd. &lt;-<span class="st"> </span>sd. <span class="op">+</span><span class="st"> </span>(x[i] <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(x))<span class="op">^</span><span class="dv">2</span></a>
<a class="sourceLine" id="cb680-5" data-line-number="5">}</a>
<a class="sourceLine" id="cb680-6" data-line-number="6">sd. &lt;-<span class="st"> </span><span class="kw">sqrt</span>(sd. <span class="op">/</span><span class="st"> </span>(<span class="kw">length</span>(x) <span class="op">-</span><span class="st"> </span><span class="dv">1</span>))</a>
<a class="sourceLine" id="cb680-7" data-line-number="7">sd.</a>
<a class="sourceLine" id="cb680-8" data-line-number="8"><span class="co">#&gt; [1] 29</span></a></code></pre></div>
<p>We could simply use the <code>sd</code> function.</p>
<div class="sourceCode" id="cb681"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb681-1" data-line-number="1"><span class="kw">sd</span>(x)</a>
<a class="sourceLine" id="cb681-2" data-line-number="2"><span class="co">#&gt; [1] 29</span></a></code></pre></div>
<p>Or if there was a need to use the equation (e.g. for pedagogical reasons), then
the functions <code>mean()</code> and <code>sum()</code> already work with vectors:</p>
<div class="sourceCode" id="cb682"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb682-1" data-line-number="1"><span class="kw">sqrt</span>(<span class="kw">sum</span>((x <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(x))<span class="op">^</span><span class="dv">2</span>) <span class="op">/</span><span class="st"> </span>(<span class="kw">length</span>(x) <span class="op">-</span><span class="st"> </span><span class="dv">1</span>))</a>
<a class="sourceLine" id="cb682-2" data-line-number="2"><span class="co">#&gt; [1] 29</span></a></code></pre></div>
<div class="sourceCode" id="cb683"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb683-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">runif</span>(<span class="dv">100</span>)</a>
<a class="sourceLine" id="cb683-2" data-line-number="2">out &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="st">"numeric"</span>, <span class="kw">length</span>(x))</a>
<a class="sourceLine" id="cb683-3" data-line-number="3">out[<span class="dv">1</span>] &lt;-<span class="st"> </span>x[<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb683-4" data-line-number="4"><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">2</span><span class="op">:</span><span class="kw">length</span>(x)) {</a>
<a class="sourceLine" id="cb683-5" data-line-number="5">  out[i] &lt;-<span class="st"> </span>out[i <span class="op">-</span><span class="st"> </span><span class="dv">1</span>] <span class="op">+</span><span class="st"> </span>x[i]</a>
<a class="sourceLine" id="cb683-6" data-line-number="6">}</a>
<a class="sourceLine" id="cb683-7" data-line-number="7">out</a>
<a class="sourceLine" id="cb683-8" data-line-number="8"><span class="co">#&gt;   [1]  0.854  1.268  2.019  2.738  3.253  4.228  4.589  4.759  5.542  5.573</span></a>
<a class="sourceLine" id="cb683-9" data-line-number="9"><span class="co">#&gt;  [11]  6.363  6.529  6.558  7.344  8.169  9.134  9.513  9.687 10.291 11.097</span></a>
<a class="sourceLine" id="cb683-10" data-line-number="10"><span class="co">#&gt;  [21] 11.133 11.866 12.082 12.098 12.226 12.912 13.554 13.882 14.269 14.976</span></a>
<a class="sourceLine" id="cb683-11" data-line-number="11"><span class="co">#&gt;  [31] 15.674 16.600 17.059 17.655 17.820 18.387 19.285 19.879 20.711 21.304</span></a>
<a class="sourceLine" id="cb683-12" data-line-number="12"><span class="co">#&gt;  [41] 22.083 22.481 23.331 24.073 24.391 24.502 24.603 25.403 25.783 25.836</span></a>
<a class="sourceLine" id="cb683-13" data-line-number="13"><span class="co">#&gt;  [51] 26.823 27.427 27.576 28.114 28.240 29.203 29.250 29.412 30.348 31.319</span></a>
<a class="sourceLine" id="cb683-14" data-line-number="14"><span class="co">#&gt;  [61] 32.029 32.914 33.891 33.926 34.365 35.009 36.004 36.319 37.175 37.715</span></a>
<a class="sourceLine" id="cb683-15" data-line-number="15"><span class="co">#&gt;  [71] 38.588 39.104 39.973 40.830 41.176 41.176 41.381 42.326 42.607 43.488</span></a>
<a class="sourceLine" id="cb683-16" data-line-number="16"><span class="co">#&gt;  [81] 44.449 44.454 45.006 45.226 45.872 46.600 47.473 47.855 48.747 49.591</span></a>
<a class="sourceLine" id="cb683-17" data-line-number="17"><span class="co">#&gt;  [91] 50.321 50.359 50.693 51.443 52.356 52.560 53.032 53.417 53.810 54.028</span></a></code></pre></div>
<p>The code above is calculating a cumulative sum. Use the function <code>cumsum()</code></p>
<div class="sourceCode" id="cb684"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb684-1" data-line-number="1"><span class="kw">all.equal</span>(<span class="kw">cumsum</span>(x), out)</a>
<a class="sourceLine" id="cb684-2" data-line-number="2"><span class="co">#&gt; [1] TRUE</span></a></code></pre></div>
</div>
</div>
<div id="exercise-21.2.3" class="section level3 unnumbered exercise" data-number="21.2.3">
<h3>Exercise 21.2.3<a href="#exercise-21.2.3" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a>
</h3>
<div class="question">
<p>Combine your function writing and for loop skills:</p>
<ol style="list-style-type: decimal">
<li><p>Write a for loop that <code>prints()</code> the lyrics to the children’s song “Alice the camel”.</p></li>
<li><p>Convert the nursery rhyme “ten in the bed” to a function.
Generalize it to any number of people in any sleeping structure.</p></li>
<li><p>Convert the song “99 bottles of beer on the wall” to a function.
Generalize to any number of any vessel containing any liquid on surface.</p></li>
</ol>
</div>
<div class="answer">
<p>The answers to each part follow.</p>
<ol style="list-style-type: decimal">
<li>
<p>The lyrics for <a href="https://www.kididdles.com/lyrics/a012.html">Alice the Camel</a> are:</p>
<blockquote>
<p>Alice the camel has five humps.<br>
Alice the camel has five humps.<br>
Alice the camel has five humps.<br>
So go, Alice, go.</p>
</blockquote>
<p>This verse is repeated, each time with one fewer hump,
until there are no humps.
The last verse, with no humps, is:</p>
<blockquote>
<p>Alice the camel has no humps.<br>
Alice the camel has no humps.<br>
Alice the camel has no humps.<br>
Now Alice is a horse.</p>
</blockquote>
<p>We’ll iterate from five to no humps, and print out a different last line if there are no humps.</p>
<div class="sourceCode" id="cb685"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb685-1" data-line-number="1">humps &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"five"</span>, <span class="st">"four"</span>, <span class="st">"three"</span>, <span class="st">"two"</span>, <span class="st">"one"</span>, <span class="st">"no"</span>)</a>
<a class="sourceLine" id="cb685-2" data-line-number="2"><span class="cf">for</span> (i <span class="cf">in</span> humps) {</a>
<a class="sourceLine" id="cb685-3" data-line-number="3">  <span class="kw">cat</span>(<span class="kw">str_c</span>(<span class="st">"Alice the camel has "</span>, <span class="kw">rep</span>(i, <span class="dv">3</span>), <span class="st">" humps."</span>,</a>
<a class="sourceLine" id="cb685-4" data-line-number="4">    <span class="dt">collapse =</span> <span class="st">"</span><span class="ch">\n</span><span class="st">"</span></a>
<a class="sourceLine" id="cb685-5" data-line-number="5">  ), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</a>
<a class="sourceLine" id="cb685-6" data-line-number="6">  <span class="cf">if</span> (i <span class="op">==</span><span class="st"> "no"</span>) {</a>
<a class="sourceLine" id="cb685-7" data-line-number="7">    <span class="kw">cat</span>(<span class="st">"Now Alice is a horse.</span><span class="ch">\n</span><span class="st">"</span>)</a>
<a class="sourceLine" id="cb685-8" data-line-number="8">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb685-9" data-line-number="9">    <span class="kw">cat</span>(<span class="st">"So go, Alice, go.</span><span class="ch">\n</span><span class="st">"</span>)</a>
<a class="sourceLine" id="cb685-10" data-line-number="10">  }</a>
<a class="sourceLine" id="cb685-11" data-line-number="11">  <span class="kw">cat</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</a>
<a class="sourceLine" id="cb685-12" data-line-number="12">}</a>
<a class="sourceLine" id="cb685-13" data-line-number="13"><span class="co">#&gt; Alice the camel has five humps.</span></a>
<a class="sourceLine" id="cb685-14" data-line-number="14"><span class="co">#&gt; Alice the camel has five humps.</span></a>
<a class="sourceLine" id="cb685-15" data-line-number="15"><span class="co">#&gt; Alice the camel has five humps. </span></a>
<a class="sourceLine" id="cb685-16" data-line-number="16"><span class="co">#&gt; So go, Alice, go.</span></a>
<a class="sourceLine" id="cb685-17" data-line-number="17"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb685-18" data-line-number="18"><span class="co">#&gt; Alice the camel has four humps.</span></a>
<a class="sourceLine" id="cb685-19" data-line-number="19"><span class="co">#&gt; Alice the camel has four humps.</span></a>
<a class="sourceLine" id="cb685-20" data-line-number="20"><span class="co">#&gt; Alice the camel has four humps. </span></a>
<a class="sourceLine" id="cb685-21" data-line-number="21"><span class="co">#&gt; So go, Alice, go.</span></a>
<a class="sourceLine" id="cb685-22" data-line-number="22"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb685-23" data-line-number="23"><span class="co">#&gt; Alice the camel has three humps.</span></a>
<a class="sourceLine" id="cb685-24" data-line-number="24"><span class="co">#&gt; Alice the camel has three humps.</span></a>
<a class="sourceLine" id="cb685-25" data-line-number="25"><span class="co">#&gt; Alice the camel has three humps. </span></a>
<a class="sourceLine" id="cb685-26" data-line-number="26"><span class="co">#&gt; So go, Alice, go.</span></a>
<a class="sourceLine" id="cb685-27" data-line-number="27"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb685-28" data-line-number="28"><span class="co">#&gt; Alice the camel has two humps.</span></a>
<a class="sourceLine" id="cb685-29" data-line-number="29"><span class="co">#&gt; Alice the camel has two humps.</span></a>
<a class="sourceLine" id="cb685-30" data-line-number="30"><span class="co">#&gt; Alice the camel has two humps. </span></a>
<a class="sourceLine" id="cb685-31" data-line-number="31"><span class="co">#&gt; So go, Alice, go.</span></a>
<a class="sourceLine" id="cb685-32" data-line-number="32"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb685-33" data-line-number="33"><span class="co">#&gt; Alice the camel has one humps.</span></a>
<a class="sourceLine" id="cb685-34" data-line-number="34"><span class="co">#&gt; Alice the camel has one humps.</span></a>
<a class="sourceLine" id="cb685-35" data-line-number="35"><span class="co">#&gt; Alice the camel has one humps. </span></a>
<a class="sourceLine" id="cb685-36" data-line-number="36"><span class="co">#&gt; So go, Alice, go.</span></a>
<a class="sourceLine" id="cb685-37" data-line-number="37"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb685-38" data-line-number="38"><span class="co">#&gt; Alice the camel has no humps.</span></a>
<a class="sourceLine" id="cb685-39" data-line-number="39"><span class="co">#&gt; Alice the camel has no humps.</span></a>
<a class="sourceLine" id="cb685-40" data-line-number="40"><span class="co">#&gt; Alice the camel has no humps. </span></a>
<a class="sourceLine" id="cb685-41" data-line-number="41"><span class="co">#&gt; Now Alice is a horse.</span></a></code></pre></div>
</li>
<li>
<p>The lyrics for <a href="https://www.kididdles.com/lyrics/t003.html">Ten in the Bed</a> are:</p>
<blockquote>
<p>Here we go!<br>
There were ten in the bed<br>
and the little one said,<br>
“Roll over, roll over.”<br>
So they all rolled over and one fell out.</p>
</blockquote>
<p>This verse is repeated, each time with one fewer in the bed, until there is one left.
That last verse is:</p>
<blockquote>
<p>One!
There was one in the bed<br>
and the little one said,<br>
“I’m lonely…”</p>
</blockquote>
<div class="sourceCode" id="cb686"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb686-1" data-line-number="1">numbers &lt;-<span class="st"> </span><span class="kw">c</span>(</a>
<a class="sourceLine" id="cb686-2" data-line-number="2">  <span class="st">"ten"</span>, <span class="st">"nine"</span>, <span class="st">"eight"</span>, <span class="st">"seven"</span>, <span class="st">"six"</span>, <span class="st">"five"</span>,</a>
<a class="sourceLine" id="cb686-3" data-line-number="3">  <span class="st">"four"</span>, <span class="st">"three"</span>, <span class="st">"two"</span>, <span class="st">"one"</span></a>
<a class="sourceLine" id="cb686-4" data-line-number="4">)</a>
<a class="sourceLine" id="cb686-5" data-line-number="5"><span class="cf">for</span> (i <span class="cf">in</span> numbers) {</a>
<a class="sourceLine" id="cb686-6" data-line-number="6">  <span class="kw">cat</span>(<span class="kw">str_c</span>(<span class="st">"There were "</span>, i, <span class="st">" in the bed</span><span class="ch">\n</span><span class="st">"</span>))</a>
<a class="sourceLine" id="cb686-7" data-line-number="7">  <span class="kw">cat</span>(<span class="st">"and the little one said</span><span class="ch">\n</span><span class="st">"</span>)</a>
<a class="sourceLine" id="cb686-8" data-line-number="8">  <span class="cf">if</span> (i <span class="op">==</span><span class="st"> "one"</span>) {</a>
<a class="sourceLine" id="cb686-9" data-line-number="9">    <span class="kw">cat</span>(<span class="st">"I'm lonely..."</span>)</a>
<a class="sourceLine" id="cb686-10" data-line-number="10">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb686-11" data-line-number="11">    <span class="kw">cat</span>(<span class="st">"Roll over, roll over</span><span class="ch">\n</span><span class="st">"</span>)</a>
<a class="sourceLine" id="cb686-12" data-line-number="12">    <span class="kw">cat</span>(<span class="st">"So they all rolled over and one fell out.</span><span class="ch">\n</span><span class="st">"</span>)</a>
<a class="sourceLine" id="cb686-13" data-line-number="13">  }</a>
<a class="sourceLine" id="cb686-14" data-line-number="14">  <span class="kw">cat</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</a>
<a class="sourceLine" id="cb686-15" data-line-number="15">}</a>
<a class="sourceLine" id="cb686-16" data-line-number="16"><span class="co">#&gt; There were ten in the bed</span></a>
<a class="sourceLine" id="cb686-17" data-line-number="17"><span class="co">#&gt; and the little one said</span></a>
<a class="sourceLine" id="cb686-18" data-line-number="18"><span class="co">#&gt; Roll over, roll over</span></a>
<a class="sourceLine" id="cb686-19" data-line-number="19"><span class="co">#&gt; So they all rolled over and one fell out.</span></a>
<a class="sourceLine" id="cb686-20" data-line-number="20"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb686-21" data-line-number="21"><span class="co">#&gt; There were nine in the bed</span></a>
<a class="sourceLine" id="cb686-22" data-line-number="22"><span class="co">#&gt; and the little one said</span></a>
<a class="sourceLine" id="cb686-23" data-line-number="23"><span class="co">#&gt; Roll over, roll over</span></a>
<a class="sourceLine" id="cb686-24" data-line-number="24"><span class="co">#&gt; So they all rolled over and one fell out.</span></a>
<a class="sourceLine" id="cb686-25" data-line-number="25"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb686-26" data-line-number="26"><span class="co">#&gt; There were eight in the bed</span></a>
<a class="sourceLine" id="cb686-27" data-line-number="27"><span class="co">#&gt; and the little one said</span></a>
<a class="sourceLine" id="cb686-28" data-line-number="28"><span class="co">#&gt; Roll over, roll over</span></a>
<a class="sourceLine" id="cb686-29" data-line-number="29"><span class="co">#&gt; So they all rolled over and one fell out.</span></a>
<a class="sourceLine" id="cb686-30" data-line-number="30"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb686-31" data-line-number="31"><span class="co">#&gt; There were seven in the bed</span></a>
<a class="sourceLine" id="cb686-32" data-line-number="32"><span class="co">#&gt; and the little one said</span></a>
<a class="sourceLine" id="cb686-33" data-line-number="33"><span class="co">#&gt; Roll over, roll over</span></a>
<a class="sourceLine" id="cb686-34" data-line-number="34"><span class="co">#&gt; So they all rolled over and one fell out.</span></a>
<a class="sourceLine" id="cb686-35" data-line-number="35"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb686-36" data-line-number="36"><span class="co">#&gt; There were six in the bed</span></a>
<a class="sourceLine" id="cb686-37" data-line-number="37"><span class="co">#&gt; and the little one said</span></a>
<a class="sourceLine" id="cb686-38" data-line-number="38"><span class="co">#&gt; Roll over, roll over</span></a>
<a class="sourceLine" id="cb686-39" data-line-number="39"><span class="co">#&gt; So they all rolled over and one fell out.</span></a>
<a class="sourceLine" id="cb686-40" data-line-number="40"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb686-41" data-line-number="41"><span class="co">#&gt; There were five in the bed</span></a>
<a class="sourceLine" id="cb686-42" data-line-number="42"><span class="co">#&gt; and the little one said</span></a>
<a class="sourceLine" id="cb686-43" data-line-number="43"><span class="co">#&gt; Roll over, roll over</span></a>
<a class="sourceLine" id="cb686-44" data-line-number="44"><span class="co">#&gt; So they all rolled over and one fell out.</span></a>
<a class="sourceLine" id="cb686-45" data-line-number="45"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb686-46" data-line-number="46"><span class="co">#&gt; There were four in the bed</span></a>
<a class="sourceLine" id="cb686-47" data-line-number="47"><span class="co">#&gt; and the little one said</span></a>
<a class="sourceLine" id="cb686-48" data-line-number="48"><span class="co">#&gt; Roll over, roll over</span></a>
<a class="sourceLine" id="cb686-49" data-line-number="49"><span class="co">#&gt; So they all rolled over and one fell out.</span></a>
<a class="sourceLine" id="cb686-50" data-line-number="50"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb686-51" data-line-number="51"><span class="co">#&gt; There were three in the bed</span></a>
<a class="sourceLine" id="cb686-52" data-line-number="52"><span class="co">#&gt; and the little one said</span></a>
<a class="sourceLine" id="cb686-53" data-line-number="53"><span class="co">#&gt; Roll over, roll over</span></a>
<a class="sourceLine" id="cb686-54" data-line-number="54"><span class="co">#&gt; So they all rolled over and one fell out.</span></a>
<a class="sourceLine" id="cb686-55" data-line-number="55"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb686-56" data-line-number="56"><span class="co">#&gt; There were two in the bed</span></a>
<a class="sourceLine" id="cb686-57" data-line-number="57"><span class="co">#&gt; and the little one said</span></a>
<a class="sourceLine" id="cb686-58" data-line-number="58"><span class="co">#&gt; Roll over, roll over</span></a>
<a class="sourceLine" id="cb686-59" data-line-number="59"><span class="co">#&gt; So they all rolled over and one fell out.</span></a>
<a class="sourceLine" id="cb686-60" data-line-number="60"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb686-61" data-line-number="61"><span class="co">#&gt; There were one in the bed</span></a>
<a class="sourceLine" id="cb686-62" data-line-number="62"><span class="co">#&gt; and the little one said</span></a>
<a class="sourceLine" id="cb686-63" data-line-number="63"><span class="co">#&gt; I'm lonely...</span></a></code></pre></div>
</li>
<li>
<p>The lyrics of <a href="https://en.wikipedia.org/wiki/99_Bottles_of_Beer">Ninety-Nine Bottles of Beer on the Wall</a> are</p>
<blockquote>
<p>99 bottles of beer on the wall, 99 bottles of beer.<br>
Take one down, pass it around, 98 bottles of beer on the wall</p>
</blockquote>
<p>This verse is repeated, each time with one few bottle, until
there are no more bottles of beer. The last verse is</p>
<blockquote>
<p>No more bottles of beer on the wall, no more bottles of beer.<br>
We’ve taken them down and passed them around; now we’re drunk and passed out!</p>
</blockquote>
<p>For the bottles of beer, I define a helper function to correctly print the number of bottles.</p>
<div class="sourceCode" id="cb687"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb687-1" data-line-number="1">bottles &lt;-<span class="st"> </span><span class="cf">function</span>(n) {</a>
<a class="sourceLine" id="cb687-2" data-line-number="2">  <span class="cf">if</span> (n <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb687-3" data-line-number="3">    <span class="kw">str_c</span>(n, <span class="st">" bottles"</span>)</a>
<a class="sourceLine" id="cb687-4" data-line-number="4">  } <span class="cf">else</span> <span class="cf">if</span> (n <span class="op">==</span><span class="st"> </span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb687-5" data-line-number="5">    <span class="st">"1 bottle"</span></a>
<a class="sourceLine" id="cb687-6" data-line-number="6">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb687-7" data-line-number="7">    <span class="st">"no more bottles"</span></a>
<a class="sourceLine" id="cb687-8" data-line-number="8">  }</a>
<a class="sourceLine" id="cb687-9" data-line-number="9">}</a>
<a class="sourceLine" id="cb687-10" data-line-number="10"></a>
<a class="sourceLine" id="cb687-11" data-line-number="11">beer_bottles &lt;-<span class="st"> </span><span class="cf">function</span>(total_bottles) {</a>
<a class="sourceLine" id="cb687-12" data-line-number="12">  <span class="co"># print each lyric</span></a>
<a class="sourceLine" id="cb687-13" data-line-number="13">  <span class="cf">for</span> (current_bottles <span class="cf">in</span> <span class="kw">seq</span>(total_bottles, <span class="dv">0</span>)) {</a>
<a class="sourceLine" id="cb687-14" data-line-number="14">    <span class="co"># first line</span></a>
<a class="sourceLine" id="cb687-15" data-line-number="15">    <span class="kw">cat</span>(<span class="kw">str_to_sentence</span>(<span class="kw">str_c</span>(<span class="kw">bottles</span>(current_bottles), <span class="st">" of beer on the wall, "</span>, <span class="kw">bottles</span>(current_bottles), <span class="st">" of beer.</span><span class="ch">\n</span><span class="st">"</span>)))   </a>
<a class="sourceLine" id="cb687-16" data-line-number="16">    <span class="co"># second line</span></a>
<a class="sourceLine" id="cb687-17" data-line-number="17">    <span class="cf">if</span> (current_bottles <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) {</a>
<a class="sourceLine" id="cb687-18" data-line-number="18">      <span class="kw">cat</span>(<span class="kw">str_c</span>(</a>
<a class="sourceLine" id="cb687-19" data-line-number="19">        <span class="st">"Take one down and pass it around, "</span>, <span class="kw">bottles</span>(current_bottles <span class="op">-</span><span class="st"> </span><span class="dv">1</span>),</a>
<a class="sourceLine" id="cb687-20" data-line-number="20">        <span class="st">" of beer on the wall.</span><span class="ch">\n</span><span class="st">"</span></a>
<a class="sourceLine" id="cb687-21" data-line-number="21">      ))          </a>
<a class="sourceLine" id="cb687-22" data-line-number="22">    } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb687-23" data-line-number="23">      <span class="kw">cat</span>(<span class="kw">str_c</span>(<span class="st">"Go to the store and buy some more, "</span>, <span class="kw">bottles</span>(total_bottles), <span class="st">" of beer on the wall.</span><span class="ch">\n</span><span class="st">"</span>))                }</a>
<a class="sourceLine" id="cb687-24" data-line-number="24">    <span class="kw">cat</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</a>
<a class="sourceLine" id="cb687-25" data-line-number="25">  }</a>
<a class="sourceLine" id="cb687-26" data-line-number="26">}</a>
<a class="sourceLine" id="cb687-27" data-line-number="27"><span class="kw">beer_bottles</span>(<span class="dv">3</span>)</a>
<a class="sourceLine" id="cb687-28" data-line-number="28"><span class="co">#&gt; 3 Bottles of beer on the wall, 3 bottles of beer.</span></a>
<a class="sourceLine" id="cb687-29" data-line-number="29"><span class="co">#&gt; Take one down and pass it around, 2 bottles of beer on the wall.</span></a>
<a class="sourceLine" id="cb687-30" data-line-number="30"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb687-31" data-line-number="31"><span class="co">#&gt; 2 Bottles of beer on the wall, 2 bottles of beer.</span></a>
<a class="sourceLine" id="cb687-32" data-line-number="32"><span class="co">#&gt; Take one down and pass it around, 1 bottle of beer on the wall.</span></a>
<a class="sourceLine" id="cb687-33" data-line-number="33"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb687-34" data-line-number="34"><span class="co">#&gt; 1 Bottle of beer on the wall, 1 bottle of beer.</span></a>
<a class="sourceLine" id="cb687-35" data-line-number="35"><span class="co">#&gt; Take one down and pass it around, no more bottles of beer on the wall.</span></a>
<a class="sourceLine" id="cb687-36" data-line-number="36"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb687-37" data-line-number="37"><span class="co">#&gt; No more bottles of beer on the wall, no more bottles of beer.</span></a>
<a class="sourceLine" id="cb687-38" data-line-number="38"><span class="co">#&gt; Go to the store and buy some more, 3 bottles of beer on the wall.</span></a></code></pre></div>
</li>
</ol>
</div>
<div id="exercise-21.2.4" class="section level4 unnumbered exercise" data-number="21.2.4">
<h4>Exercise 21.2.4<a href="#exercise-21.2.4" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a>
</h4>
<div class="question">
<p>It’s common to see for loops that don’t preallocate the output and instead increase the length of a vector at each step:</p>
<div class="sourceCode" id="cb688"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb688-1" data-line-number="1">output &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="st">"integer"</span>, <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb688-2" data-line-number="2"><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(x)) {</a>
<a class="sourceLine" id="cb688-3" data-line-number="3">  output &lt;-<span class="st"> </span><span class="kw">c</span>(output, <span class="kw">lengths</span>(x[[i]]))</a>
<a class="sourceLine" id="cb688-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb688-5" data-line-number="5">output</a></code></pre></div>
<p>How does this affect performance?
Design and execute an experiment.</p>
</div>
<div class="answer">
<p>In order to compare these two approaches, I’ll define two functions:
<code>add_to_vector</code> will append to a vector, like the example in the question,
and <code>add_to_vector_2</code> which pre-allocates a vector.</p>
<div class="sourceCode" id="cb689"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb689-1" data-line-number="1">add_to_vector &lt;-<span class="st"> </span><span class="cf">function</span>(n) {</a>
<a class="sourceLine" id="cb689-2" data-line-number="2">  output &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="st">"integer"</span>, <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb689-3" data-line-number="3">  <span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_len</span>(n)) {</a>
<a class="sourceLine" id="cb689-4" data-line-number="4">    output &lt;-<span class="st"> </span><span class="kw">c</span>(output, i)</a>
<a class="sourceLine" id="cb689-5" data-line-number="5">  }</a>
<a class="sourceLine" id="cb689-6" data-line-number="6">  output</a>
<a class="sourceLine" id="cb689-7" data-line-number="7">}</a></code></pre></div>
<div class="sourceCode" id="cb690"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb690-1" data-line-number="1">add_to_vector_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="cf">function</span>(n) {</a>
<a class="sourceLine" id="cb690-2" data-line-number="2">  output &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="st">"integer"</span>, n)</a>
<a class="sourceLine" id="cb690-3" data-line-number="3">  <span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_len</span>(n)) {</a>
<a class="sourceLine" id="cb690-4" data-line-number="4">    output[[i]] &lt;-<span class="st"> </span>i</a>
<a class="sourceLine" id="cb690-5" data-line-number="5">  }</a>
<a class="sourceLine" id="cb690-6" data-line-number="6">  output</a>
<a class="sourceLine" id="cb690-7" data-line-number="7">}</a></code></pre></div>
<p>I’ll use the package microbenchmark to run these functions several times and compare the time it takes.
The package microbenchmark contains utilities for benchmarking R expressions.
In particular, the <code>microbenchmark()</code> function will run an R expression a number of times and time it.</p>
<div class="sourceCode" id="cb691"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb691-1" data-line-number="1">timings &lt;-<span class="st"> </span><span class="kw">microbenchmark</span>(<span class="kw">add_to_vector</span>(<span class="dv">10000</span>), <span class="kw">add_to_vector_2</span>(<span class="dv">10000</span>), <span class="dt">times =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb691-2" data-line-number="2">timings</a>
<a class="sourceLine" id="cb691-3" data-line-number="3"><span class="co">#&gt; Unit: microseconds</span></a>
<a class="sourceLine" id="cb691-4" data-line-number="4"><span class="co">#&gt;                    expr    min     lq   mean median     uq    max neval</span></a>
<a class="sourceLine" id="cb691-5" data-line-number="5"><span class="co">#&gt;    add_to_vector(10000) 114260 114526 120054 115014 124651 142605    10</span></a>
<a class="sourceLine" id="cb691-6" data-line-number="6"><span class="co">#&gt;  add_to_vector_2(10000)    338    338   1368    349    438   6191    10</span></a></code></pre></div>
<p>In this example, appending to a vector takes 330 times longer than pre-allocating the vector.
You may get different answers, but the longer the vector and the larger the objects, the more that pre-allocation will outperform appending.</p>
</div>
</div>
</div>
</div>
<div id="for-loop-variations" class="section level2 r4ds-section">
<h2>
<a href="#for-loop-variations" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a><span class="header-section-number">21.3</span> For loop variations<a href="https://r4ds.had.co.nz/iteration.html#for-loop-variations" class="r4ds-section-link section-link" aria-hidden="true"><i class="fa fa-external-link" aria-hidden="true"></i></a>
</h2>
<div id="exercise-21.3.1" class="section level3 unnumbered exercise" data-number="21.3.1">
<h3>Exercise 21.3.1<a href="#exercise-21.3.1" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a>
</h3>
<div class="question">
<p>Imagine you have a directory full of CSV files that you want to read in.
You have their paths in a vector,
<code>files &lt;- dir("data/", pattern = "\\.csv$", full.names = TRUE)</code>, and now
want to read each one with <code>read_csv()</code>. Write the for loop that will
load them into a single data frame.</p>
</div>
<div class="answer">
<div class="sourceCode" id="cb692"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb692-1" data-line-number="1">files &lt;-<span class="st"> </span><span class="kw">dir</span>(<span class="st">"data/"</span>, <span class="dt">pattern =</span> <span class="st">"</span><span class="ch">\\</span><span class="st">.csv$"</span>, <span class="dt">full.names =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb692-2" data-line-number="2">files</a>
<a class="sourceLine" id="cb692-3" data-line-number="3"><span class="co">#&gt; [1] "data//file1.csv" "data//file2.csv" "data//file3.csv"</span></a></code></pre></div>
<p>Since, the number of files is known, pre-allocate a list with a length equal to the number of files.</p>
<div class="sourceCode" id="cb693"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb693-1" data-line-number="1">df_list &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="st">"list"</span>, <span class="kw">length</span>(files))</a></code></pre></div>
<p>Then, read each file into a data frame, and assign it to an element in that list.
The result is a list of data frames.</p>
<div class="sourceCode" id="cb694"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb694-1" data-line-number="1"><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(files)) {</a>
<a class="sourceLine" id="cb694-2" data-line-number="2">  df_list[[i]] &lt;-<span class="st"> </span><span class="kw">read_csv</span>(files[[i]])</a>
<a class="sourceLine" id="cb694-3" data-line-number="3">}</a>
<a class="sourceLine" id="cb694-4" data-line-number="4"><span class="co">#&gt; Parsed with column specification:</span></a>
<a class="sourceLine" id="cb694-5" data-line-number="5"><span class="co">#&gt; cols(</span></a>
<a class="sourceLine" id="cb694-6" data-line-number="6"><span class="co">#&gt;   X1 = col_double(),</span></a>
<a class="sourceLine" id="cb694-7" data-line-number="7"><span class="co">#&gt;   X2 = col_character()</span></a>
<a class="sourceLine" id="cb694-8" data-line-number="8"><span class="co">#&gt; )</span></a>
<a class="sourceLine" id="cb694-9" data-line-number="9"><span class="co">#&gt; Parsed with column specification:</span></a>
<a class="sourceLine" id="cb694-10" data-line-number="10"><span class="co">#&gt; cols(</span></a>
<a class="sourceLine" id="cb694-11" data-line-number="11"><span class="co">#&gt;   X1 = col_double(),</span></a>
<a class="sourceLine" id="cb694-12" data-line-number="12"><span class="co">#&gt;   X2 = col_character()</span></a>
<a class="sourceLine" id="cb694-13" data-line-number="13"><span class="co">#&gt; )</span></a>
<a class="sourceLine" id="cb694-14" data-line-number="14"><span class="co">#&gt; Parsed with column specification:</span></a>
<a class="sourceLine" id="cb694-15" data-line-number="15"><span class="co">#&gt; cols(</span></a>
<a class="sourceLine" id="cb694-16" data-line-number="16"><span class="co">#&gt;   X1 = col_double(),</span></a>
<a class="sourceLine" id="cb694-17" data-line-number="17"><span class="co">#&gt;   X2 = col_character()</span></a>
<a class="sourceLine" id="cb694-18" data-line-number="18"><span class="co">#&gt; )</span></a></code></pre></div>
<div class="sourceCode" id="cb695"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb695-1" data-line-number="1"><span class="kw">print</span>(df_list)</a>
<a class="sourceLine" id="cb695-2" data-line-number="2"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb695-3" data-line-number="3"><span class="co">#&gt; # A tibble: 2 x 2</span></a>
<a class="sourceLine" id="cb695-4" data-line-number="4"><span class="co">#&gt;      X1 X2   </span></a>
<a class="sourceLine" id="cb695-5" data-line-number="5"><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb695-6" data-line-number="6"><span class="co">#&gt; 1     1 a    </span></a>
<a class="sourceLine" id="cb695-7" data-line-number="7"><span class="co">#&gt; 2     2 b    </span></a>
<a class="sourceLine" id="cb695-8" data-line-number="8"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb695-9" data-line-number="9"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb695-10" data-line-number="10"><span class="co">#&gt; # A tibble: 2 x 2</span></a>
<a class="sourceLine" id="cb695-11" data-line-number="11"><span class="co">#&gt;      X1 X2   </span></a>
<a class="sourceLine" id="cb695-12" data-line-number="12"><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb695-13" data-line-number="13"><span class="co">#&gt; 1     3 c    </span></a>
<a class="sourceLine" id="cb695-14" data-line-number="14"><span class="co">#&gt; 2     4 d    </span></a>
<a class="sourceLine" id="cb695-15" data-line-number="15"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb695-16" data-line-number="16"><span class="co">#&gt; [[3]]</span></a>
<a class="sourceLine" id="cb695-17" data-line-number="17"><span class="co">#&gt; # A tibble: 2 x 2</span></a>
<a class="sourceLine" id="cb695-18" data-line-number="18"><span class="co">#&gt;      X1 X2   </span></a>
<a class="sourceLine" id="cb695-19" data-line-number="19"><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb695-20" data-line-number="20"><span class="co">#&gt; 1     5 e    </span></a>
<a class="sourceLine" id="cb695-21" data-line-number="21"><span class="co">#&gt; 2     6 f</span></a></code></pre></div>
<p>Finally, use use <code>bind_rows()</code> to combine the list of data frames into a single data frame.</p>
<div class="sourceCode" id="cb696"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb696-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(df_list)</a></code></pre></div>
<div class="sourceCode" id="cb697"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb697-1" data-line-number="1"><span class="kw">print</span>(df)</a>
<a class="sourceLine" id="cb697-2" data-line-number="2"><span class="co">#&gt; # A tibble: 6 x 2</span></a>
<a class="sourceLine" id="cb697-3" data-line-number="3"><span class="co">#&gt;      X1 X2   </span></a>
<a class="sourceLine" id="cb697-4" data-line-number="4"><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb697-5" data-line-number="5"><span class="co">#&gt; 1     1 a    </span></a>
<a class="sourceLine" id="cb697-6" data-line-number="6"><span class="co">#&gt; 2     2 b    </span></a>
<a class="sourceLine" id="cb697-7" data-line-number="7"><span class="co">#&gt; 3     3 c    </span></a>
<a class="sourceLine" id="cb697-8" data-line-number="8"><span class="co">#&gt; 4     4 d    </span></a>
<a class="sourceLine" id="cb697-9" data-line-number="9"><span class="co">#&gt; 5     5 e    </span></a>
<a class="sourceLine" id="cb697-10" data-line-number="10"><span class="co">#&gt; 6     6 f</span></a></code></pre></div>
<p>Alternatively, I could have pre-allocated a list with the names of the files.</p>
<div class="sourceCode" id="cb698"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb698-1" data-line-number="1">df2_list &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="st">"list"</span>, <span class="kw">length</span>(files))</a>
<a class="sourceLine" id="cb698-2" data-line-number="2"><span class="kw">names</span>(df2_list) &lt;-<span class="st"> </span>files</a>
<a class="sourceLine" id="cb698-3" data-line-number="3"><span class="cf">for</span> (fname <span class="cf">in</span> files) {</a>
<a class="sourceLine" id="cb698-4" data-line-number="4">  df2_list[[fname]] &lt;-<span class="st"> </span><span class="kw">read_csv</span>(fname)</a>
<a class="sourceLine" id="cb698-5" data-line-number="5">}</a>
<a class="sourceLine" id="cb698-6" data-line-number="6"><span class="co">#&gt; Parsed with column specification:</span></a>
<a class="sourceLine" id="cb698-7" data-line-number="7"><span class="co">#&gt; cols(</span></a>
<a class="sourceLine" id="cb698-8" data-line-number="8"><span class="co">#&gt;   X1 = col_double(),</span></a>
<a class="sourceLine" id="cb698-9" data-line-number="9"><span class="co">#&gt;   X2 = col_character()</span></a>
<a class="sourceLine" id="cb698-10" data-line-number="10"><span class="co">#&gt; )</span></a>
<a class="sourceLine" id="cb698-11" data-line-number="11"><span class="co">#&gt; Parsed with column specification:</span></a>
<a class="sourceLine" id="cb698-12" data-line-number="12"><span class="co">#&gt; cols(</span></a>
<a class="sourceLine" id="cb698-13" data-line-number="13"><span class="co">#&gt;   X1 = col_double(),</span></a>
<a class="sourceLine" id="cb698-14" data-line-number="14"><span class="co">#&gt;   X2 = col_character()</span></a>
<a class="sourceLine" id="cb698-15" data-line-number="15"><span class="co">#&gt; )</span></a>
<a class="sourceLine" id="cb698-16" data-line-number="16"><span class="co">#&gt; Parsed with column specification:</span></a>
<a class="sourceLine" id="cb698-17" data-line-number="17"><span class="co">#&gt; cols(</span></a>
<a class="sourceLine" id="cb698-18" data-line-number="18"><span class="co">#&gt;   X1 = col_double(),</span></a>
<a class="sourceLine" id="cb698-19" data-line-number="19"><span class="co">#&gt;   X2 = col_character()</span></a>
<a class="sourceLine" id="cb698-20" data-line-number="20"><span class="co">#&gt; )</span></a>
<a class="sourceLine" id="cb698-21" data-line-number="21">df2 &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(df2_list)</a></code></pre></div>
</div>
</div>
<div id="exercise-21.3.2" class="section level3 unnumbered exercise" data-number="21.3.2">
<h3>Exercise 21.3.2<a href="#exercise-21.3.2" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a>
</h3>
<div class="question">
<p>What happens if you use <code>for (nm in names(x))</code> and <code>x</code> has no names?
What if only some of the elements are named?
What if the names are not unique?</p>
</div>
<div class="answer">
<p>Let’s try it out and see what happens.
When there are no names for the vector, it does not run the code in the loop.
In other words, it runs zero iterations of the loop.</p>
<div class="sourceCode" id="cb699"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb699-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">13</span>)</a>
<a class="sourceLine" id="cb699-2" data-line-number="2"><span class="kw">print</span>(<span class="kw">names</span>(x))</a>
<a class="sourceLine" id="cb699-3" data-line-number="3"><span class="co">#&gt; NULL</span></a>
<a class="sourceLine" id="cb699-4" data-line-number="4"><span class="cf">for</span> (nm <span class="cf">in</span> <span class="kw">names</span>(x)) {</a>
<a class="sourceLine" id="cb699-5" data-line-number="5">  <span class="kw">print</span>(nm)</a>
<a class="sourceLine" id="cb699-6" data-line-number="6">  <span class="kw">print</span>(x[[nm]])</a>
<a class="sourceLine" id="cb699-7" data-line-number="7">}</a></code></pre></div>
<p>Note that the length of <code>NULL</code> is zero:</p>
<div class="sourceCode" id="cb700"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb700-1" data-line-number="1"><span class="kw">length</span>(<span class="ot">NULL</span>)</a>
<a class="sourceLine" id="cb700-2" data-line-number="2"><span class="co">#&gt; [1] 0</span></a></code></pre></div>
<p>If there only some names, then we get an error for trying to access an element without a name.</p>
<div class="sourceCode" id="cb701"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb701-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">a =</span> <span class="dv">11</span>, <span class="dv">12</span>, <span class="dt">c =</span> <span class="dv">13</span>)</a>
<a class="sourceLine" id="cb701-2" data-line-number="2"><span class="kw">names</span>(x)</a>
<a class="sourceLine" id="cb701-3" data-line-number="3"><span class="co">#&gt; [1] "a" ""  "c"</span></a></code></pre></div>
<div class="sourceCode" id="cb702"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb702-1" data-line-number="1"><span class="cf">for</span> (nm <span class="cf">in</span> <span class="kw">names</span>(x)) {</a>
<a class="sourceLine" id="cb702-2" data-line-number="2">  <span class="kw">print</span>(nm)</a>
<a class="sourceLine" id="cb702-3" data-line-number="3">  <span class="kw">print</span>(x[[nm]])</a>
<a class="sourceLine" id="cb702-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb702-5" data-line-number="5"><span class="co">#&gt; [1] "a"</span></a>
<a class="sourceLine" id="cb702-6" data-line-number="6"><span class="co">#&gt; [1] 11</span></a>
<a class="sourceLine" id="cb702-7" data-line-number="7"><span class="co">#&gt; [1] ""</span></a>
<a class="sourceLine" id="cb702-8" data-line-number="8"><span class="co">#&gt; Error in x[[nm]]: subscript out of bounds</span></a></code></pre></div>
<p>Finally, if the vector contains duplicate names, then <code>x[[nm]]</code> returns the <em>first</em> element with that name.</p>
<div class="sourceCode" id="cb703"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb703-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">a =</span> <span class="dv">11</span>, <span class="dt">a =</span> <span class="dv">12</span>, <span class="dt">c =</span> <span class="dv">13</span>)</a>
<a class="sourceLine" id="cb703-2" data-line-number="2"><span class="kw">names</span>(x)</a>
<a class="sourceLine" id="cb703-3" data-line-number="3"><span class="co">#&gt; [1] "a" "a" "c"</span></a></code></pre></div>
<div class="sourceCode" id="cb704"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb704-1" data-line-number="1"><span class="cf">for</span> (nm <span class="cf">in</span> <span class="kw">names</span>(x)) {</a>
<a class="sourceLine" id="cb704-2" data-line-number="2">  <span class="kw">print</span>(nm)</a>
<a class="sourceLine" id="cb704-3" data-line-number="3">  <span class="kw">print</span>(x[[nm]])</a>
<a class="sourceLine" id="cb704-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb704-5" data-line-number="5"><span class="co">#&gt; [1] "a"</span></a>
<a class="sourceLine" id="cb704-6" data-line-number="6"><span class="co">#&gt; [1] 11</span></a>
<a class="sourceLine" id="cb704-7" data-line-number="7"><span class="co">#&gt; [1] "a"</span></a>
<a class="sourceLine" id="cb704-8" data-line-number="8"><span class="co">#&gt; [1] 11</span></a>
<a class="sourceLine" id="cb704-9" data-line-number="9"><span class="co">#&gt; [1] "c"</span></a>
<a class="sourceLine" id="cb704-10" data-line-number="10"><span class="co">#&gt; [1] 13</span></a></code></pre></div>
</div>
</div>
<div id="exercise-21.3.3" class="section level3 unnumbered exercise" data-number="21.3.3">
<h3>Exercise 21.3.3<a href="#exercise-21.3.3" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a>
</h3>
<div class="question">
<p>Write a function that prints the mean of each numeric column in a data frame, along with its name.
For example, <code>show_mean(iris)</code> would print:</p>
<div class="sourceCode" id="cb705"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb705-1" data-line-number="1"><span class="kw">show_mean</span>(iris)</a>
<a class="sourceLine" id="cb705-2" data-line-number="2"><span class="co"># &gt; Sepal.Length: 5.84</span></a>
<a class="sourceLine" id="cb705-3" data-line-number="3"><span class="co"># &gt; Sepal.Width:  3.06</span></a>
<a class="sourceLine" id="cb705-4" data-line-number="4"><span class="co"># &gt; Petal.Length: 3.76</span></a>
<a class="sourceLine" id="cb705-5" data-line-number="5"><span class="co"># &gt; Petal.Width:  1.20</span></a></code></pre></div>
<p>Extra challenge: what function did I use to make sure that the numbers lined up nicely, even though the variable names had different lengths?</p>
</div>
<div class="answer">
<p>There may be other functions to do this, but I’ll use <code>str_pad()</code>, and <code>str_length()</code> to ensure that the space given to the variable names is the same.
I messed around with the options to <code>format()</code> until I got two digits.</p>
<div class="sourceCode" id="cb706"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb706-1" data-line-number="1">show_mean &lt;-<span class="st"> </span><span class="cf">function</span>(df, <span class="dt">digits =</span> <span class="dv">2</span>) {</a>
<a class="sourceLine" id="cb706-2" data-line-number="2">  <span class="co"># Get max length of all variable names in the dataset</span></a>
<a class="sourceLine" id="cb706-3" data-line-number="3">  maxstr &lt;-<span class="st"> </span><span class="kw">max</span>(<span class="kw">str_length</span>(<span class="kw">names</span>(df)))</a>
<a class="sourceLine" id="cb706-4" data-line-number="4">  <span class="cf">for</span> (nm <span class="cf">in</span> <span class="kw">names</span>(df)) {</a>
<a class="sourceLine" id="cb706-5" data-line-number="5">    <span class="cf">if</span> (<span class="kw">is.numeric</span>(df[[nm]])) {</a>
<a class="sourceLine" id="cb706-6" data-line-number="6">      <span class="kw">cat</span>(</a>
<a class="sourceLine" id="cb706-7" data-line-number="7">        <span class="kw">str_c</span>(<span class="kw">str_pad</span>(<span class="kw">str_c</span>(nm, <span class="st">":"</span>), maxstr <span class="op">+</span><span class="st"> </span>1L, <span class="dt">side =</span> <span class="st">"right"</span>),</a>
<a class="sourceLine" id="cb706-8" data-line-number="8">          <span class="kw">format</span>(<span class="kw">mean</span>(df[[nm]]), <span class="dt">digits =</span> digits, <span class="dt">nsmall =</span> digits),</a>
<a class="sourceLine" id="cb706-9" data-line-number="9">          <span class="dt">sep =</span> <span class="st">" "</span></a>
<a class="sourceLine" id="cb706-10" data-line-number="10">        ),</a>
<a class="sourceLine" id="cb706-11" data-line-number="11">        <span class="st">"</span><span class="ch">\n</span><span class="st">"</span></a>
<a class="sourceLine" id="cb706-12" data-line-number="12">      )</a>
<a class="sourceLine" id="cb706-13" data-line-number="13">    }</a>
<a class="sourceLine" id="cb706-14" data-line-number="14">  }</a>
<a class="sourceLine" id="cb706-15" data-line-number="15">}</a>
<a class="sourceLine" id="cb706-16" data-line-number="16"><span class="kw">show_mean</span>(iris)</a>
<a class="sourceLine" id="cb706-17" data-line-number="17"><span class="co">#&gt; Sepal.Length: 5.84 </span></a>
<a class="sourceLine" id="cb706-18" data-line-number="18"><span class="co">#&gt; Sepal.Width:  3.06 </span></a>
<a class="sourceLine" id="cb706-19" data-line-number="19"><span class="co">#&gt; Petal.Length: 3.76 </span></a>
<a class="sourceLine" id="cb706-20" data-line-number="20"><span class="co">#&gt; Petal.Width:  1.20</span></a></code></pre></div>
</div>
</div>
<div id="exercise-21.3.4" class="section level3 unnumbered exercise" data-number="21.3.4">
<h3>Exercise 21.3.4<a href="#exercise-21.3.4" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a>
</h3>
<div class="question">
<p>What does this code do?
How does it work?</p>
<div class="sourceCode" id="cb707"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb707-1" data-line-number="1">trans &lt;-<span class="st"> </span><span class="kw">list</span>(</a>
<a class="sourceLine" id="cb707-2" data-line-number="2">  <span class="dt">disp =</span> <span class="cf">function</span>(x) x <span class="op">*</span><span class="st"> </span><span class="fl">0.0163871</span>,</a>
<a class="sourceLine" id="cb707-3" data-line-number="3">  <span class="dt">am =</span> <span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb707-4" data-line-number="4">    <span class="kw">factor</span>(x, <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">"auto"</span>, <span class="st">"manual"</span>))</a>
<a class="sourceLine" id="cb707-5" data-line-number="5">  }</a>
<a class="sourceLine" id="cb707-6" data-line-number="6">)</a></code></pre></div>
<div class="sourceCode" id="cb708"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb708-1" data-line-number="1"><span class="cf">for</span> (var <span class="cf">in</span> <span class="kw">names</span>(trans)) {</a>
<a class="sourceLine" id="cb708-2" data-line-number="2">  mtcars[[var]] &lt;-<span class="st"> </span>trans[[var]](mtcars[[var]])</a>
<a class="sourceLine" id="cb708-3" data-line-number="3">}</a></code></pre></div>
</div>
<div class="answer">
<p>This code mutates the <code>disp</code> and <code>am</code> columns:</p>
<ul>
<li>
<code>disp</code> is multiplied by 0.0163871</li>
<li>
<code>am</code> is replaced by a factor variable.</li>
</ul>
<p>The code works by looping over a named list of functions.
It calls the named function in the list on the column of <code>mtcars</code> with the same name, and replaces the values of that column.</p>
<p>This is a function.</p>
<div class="sourceCode" id="cb709"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb709-1" data-line-number="1">trans[[<span class="st">"disp"</span>]]</a></code></pre></div>
<p>This applies the function to the column of <code>mtcars</code> with the same name</p>
<div class="sourceCode" id="cb710"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb710-1" data-line-number="1">trans[[<span class="st">"disp"</span>]](mtcars[[<span class="st">"disp"</span>]])</a></code></pre></div>
</div>
</div>
</div>
<div id="for-loops-vs.functionals" class="section level2 r4ds-section">
<h2>
<a href="#for-loops-vs.functionals" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a><span class="header-section-number">21.4</span> For loops vs. functionals<a href="https://r4ds.had.co.nz/iteration.html#for-loops-vs.functionals" class="r4ds-section-link section-link" aria-hidden="true"><i class="fa fa-external-link" aria-hidden="true"></i></a>
</h2>
<div id="exercise-21.4.1" class="section level3 unnumbered exercise" data-number="21.4.1">
<h3>Exercise 21.4.1<a href="#exercise-21.4.1" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a>
</h3>
<div class="question">
<p>Read the documentation for <code>apply()</code>.
In the 2nd case, what two for-loops does it generalize.</p>
</div>
<div class="answer">
<p>For an object with two-dimensions, such as a matrix or data frame, <code>apply()</code> replaces looping over the rows or columns of a matrix or data-frame.
The <code>apply()</code> function is used like <code>apply(X, MARGIN, FUN, ...)</code>, where <code>X</code> is a matrix or array, <code>FUN</code> is a function to apply, and <code>...</code> are additional arguments passed to <code>FUN</code>.</p>
<p>When <code>MARGIN = 1</code>, then the function is applied to each row.
For example, the following example calculates the row means of a matrix.</p>
<div class="sourceCode" id="cb711"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb711-1" data-line-number="1">X &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">rnorm</span>(<span class="dv">15</span>), <span class="dt">nrow =</span> <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb711-2" data-line-number="2">X</a>
<a class="sourceLine" id="cb711-3" data-line-number="3"><span class="co">#&gt;         [,1]   [,2]   [,3]</span></a>
<a class="sourceLine" id="cb711-4" data-line-number="4"><span class="co">#&gt; [1,] -1.4523  0.124  0.709</span></a>
<a class="sourceLine" id="cb711-5" data-line-number="5"><span class="co">#&gt; [2,]  0.9412 -0.998 -1.529</span></a>
<a class="sourceLine" id="cb711-6" data-line-number="6"><span class="co">#&gt; [3,] -0.3389  1.233  0.237</span></a>
<a class="sourceLine" id="cb711-7" data-line-number="7"><span class="co">#&gt; [4,] -0.0756  0.340 -1.313</span></a>
<a class="sourceLine" id="cb711-8" data-line-number="8"><span class="co">#&gt; [5,]  0.0402 -0.473  0.747</span></a></code></pre></div>
<div class="sourceCode" id="cb712"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb712-1" data-line-number="1"><span class="kw">apply</span>(X, <span class="dv">1</span>, mean)</a>
<a class="sourceLine" id="cb712-2" data-line-number="2"><span class="co">#&gt; [1] -0.206 -0.529  0.377 -0.349  0.105</span></a></code></pre></div>
<p>That is equivalent to this for-loop.</p>
<div class="sourceCode" id="cb713"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb713-1" data-line-number="1">X_row_means &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="st">"numeric"</span>, <span class="dt">length =</span> <span class="kw">nrow</span>(X))</a>
<a class="sourceLine" id="cb713-2" data-line-number="2"><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_len</span>(<span class="kw">nrow</span>(X))) {</a>
<a class="sourceLine" id="cb713-3" data-line-number="3">  X_row_means[[i]] &lt;-<span class="st"> </span><span class="kw">mean</span>(X[i, ])</a>
<a class="sourceLine" id="cb713-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb713-5" data-line-number="5">X_row_means</a>
<a class="sourceLine" id="cb713-6" data-line-number="6"><span class="co">#&gt; [1] -0.206 -0.529  0.377 -0.349  0.105</span></a></code></pre></div>
<div class="sourceCode" id="cb714"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb714-1" data-line-number="1">X &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">rnorm</span>(<span class="dv">15</span>), <span class="dt">nrow =</span> <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb714-2" data-line-number="2">X</a>
<a class="sourceLine" id="cb714-3" data-line-number="3"><span class="co">#&gt;         [,1]   [,2]     [,3]</span></a>
<a class="sourceLine" id="cb714-4" data-line-number="4"><span class="co">#&gt; [1,] -1.5625  1.153  1.20377</span></a>
<a class="sourceLine" id="cb714-5" data-line-number="5"><span class="co">#&gt; [2,]  0.0711 -1.687 -1.43127</span></a>
<a class="sourceLine" id="cb714-6" data-line-number="6"><span class="co">#&gt; [3,] -0.6395 -0.903  1.38291</span></a>
<a class="sourceLine" id="cb714-7" data-line-number="7"><span class="co">#&gt; [4,] -0.8452  1.318  0.00313</span></a>
<a class="sourceLine" id="cb714-8" data-line-number="8"><span class="co">#&gt; [5,]  0.6752  1.100 -0.07789</span></a></code></pre></div>
<p>When <code>MARGIN = 2</code>, <code>apply()</code> is equivalent to a for-loop looping over columns.</p>
<div class="sourceCode" id="cb715"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb715-1" data-line-number="1"><span class="kw">apply</span>(X, <span class="dv">2</span>, mean)</a>
<a class="sourceLine" id="cb715-2" data-line-number="2"><span class="co">#&gt; [1] -0.460  0.196  0.216</span></a></code></pre></div>
<div class="sourceCode" id="cb716"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb716-1" data-line-number="1">X_col_means &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="st">"numeric"</span>, <span class="dt">length =</span> <span class="kw">ncol</span>(X))</a>
<a class="sourceLine" id="cb716-2" data-line-number="2"><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_len</span>(<span class="kw">ncol</span>(X))) {</a>
<a class="sourceLine" id="cb716-3" data-line-number="3">  X_col_means[[i]] &lt;-<span class="st"> </span><span class="kw">mean</span>(X[, i])</a>
<a class="sourceLine" id="cb716-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb716-5" data-line-number="5">X_col_means</a>
<a class="sourceLine" id="cb716-6" data-line-number="6"><span class="co">#&gt; [1] -0.460  0.196  0.216</span></a></code></pre></div>
</div>
</div>
<div id="exercise-21.4.2" class="section level3 unnumbered exercise" data-number="21.4.2">
<h3>Exercise 21.4.2<a href="#exercise-21.4.2" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a>
</h3>
<div class="question">
<p>Adapt <code>col_summary()</code> so that it only applies to numeric columns.
You might want to start with an <code>is_numeric()</code> function that returns a logical vector that has a <code>TRUE</code> corresponding to each numeric column.</p>
</div>
<div class="answer">
<p>The original <code>col_summary()</code> function is</p>
<div class="sourceCode" id="cb717"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb717-1" data-line-number="1">col_summary &lt;-<span class="st"> </span><span class="cf">function</span>(df, fun) {</a>
<a class="sourceLine" id="cb717-2" data-line-number="2">  out &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="st">"double"</span>, <span class="kw">length</span>(df))</a>
<a class="sourceLine" id="cb717-3" data-line-number="3">  <span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(df)) {</a>
<a class="sourceLine" id="cb717-4" data-line-number="4">    out[i] &lt;-<span class="st"> </span><span class="kw">fun</span>(df[[i]])</a>
<a class="sourceLine" id="cb717-5" data-line-number="5">  }</a>
<a class="sourceLine" id="cb717-6" data-line-number="6">  out</a>
<a class="sourceLine" id="cb717-7" data-line-number="7">}</a></code></pre></div>
<p>The adapted version adds extra logic to only apply the function to numeric columns.</p>
<div class="sourceCode" id="cb718"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb718-1" data-line-number="1">col_summary2 &lt;-<span class="st"> </span><span class="cf">function</span>(df, fun) {</a>
<a class="sourceLine" id="cb718-2" data-line-number="2">  <span class="co"># create an empty vector which will store whether each</span></a>
<a class="sourceLine" id="cb718-3" data-line-number="3">  <span class="co"># column is numeric</span></a>
<a class="sourceLine" id="cb718-4" data-line-number="4">  numeric_cols &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="st">"logical"</span>, <span class="kw">length</span>(df))</a>
<a class="sourceLine" id="cb718-5" data-line-number="5">  <span class="co"># test whether each column is numeric</span></a>
<a class="sourceLine" id="cb718-6" data-line-number="6">  <span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(df)) {</a>
<a class="sourceLine" id="cb718-7" data-line-number="7">    numeric_cols[[i]] &lt;-<span class="st"> </span><span class="kw">is.numeric</span>(df[[i]])</a>
<a class="sourceLine" id="cb718-8" data-line-number="8">  }</a>
<a class="sourceLine" id="cb718-9" data-line-number="9">  <span class="co"># find the indexes of the numeric columns</span></a>
<a class="sourceLine" id="cb718-10" data-line-number="10">  idxs &lt;-<span class="st"> </span><span class="kw">which</span>(numeric_cols)</a>
<a class="sourceLine" id="cb718-11" data-line-number="11">  <span class="co"># find the number of numeric columns</span></a>
<a class="sourceLine" id="cb718-12" data-line-number="12">  n &lt;-<span class="st"> </span><span class="kw">sum</span>(numeric_cols)</a>
<a class="sourceLine" id="cb718-13" data-line-number="13">  <span class="co"># create a vector to hold the results</span></a>
<a class="sourceLine" id="cb718-14" data-line-number="14">  out &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="st">"double"</span>, n)</a>
<a class="sourceLine" id="cb718-15" data-line-number="15">  <span class="co"># apply the function only to numeric vectors</span></a>
<a class="sourceLine" id="cb718-16" data-line-number="16">  <span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(idxs)) {</a>
<a class="sourceLine" id="cb718-17" data-line-number="17">    out[[i]] &lt;-<span class="st"> </span><span class="kw">fun</span>(df[[idxs[[i]]]])</a>
<a class="sourceLine" id="cb718-18" data-line-number="18">  }</a>
<a class="sourceLine" id="cb718-19" data-line-number="19">  <span class="co"># name the vector</span></a>
<a class="sourceLine" id="cb718-20" data-line-number="20">  <span class="kw">names</span>(out) &lt;-<span class="st"> </span><span class="kw">names</span>(df)[idxs]</a>
<a class="sourceLine" id="cb718-21" data-line-number="21">  out</a>
<a class="sourceLine" id="cb718-22" data-line-number="22">}</a></code></pre></div>
<p>Let’s test that <code>col_summary2()</code> works by creating a small data frame with
some numeric and non-numeric columns.</p>
<div class="sourceCode" id="cb719"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb719-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw">tibble</span>(</a>
<a class="sourceLine" id="cb719-2" data-line-number="2">  <span class="dt">X1 =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>),</a>
<a class="sourceLine" id="cb719-3" data-line-number="3">  <span class="dt">X2 =</span> <span class="kw">c</span>(<span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>),</a>
<a class="sourceLine" id="cb719-4" data-line-number="4">  <span class="dt">X3 =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">-1</span>, <span class="dv">5</span>),</a>
<a class="sourceLine" id="cb719-5" data-line-number="5">  <span class="dt">X4 =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb719-6" data-line-number="6">)</a>
<a class="sourceLine" id="cb719-7" data-line-number="7"><span class="kw">col_summary2</span>(df, mean)</a>
<a class="sourceLine" id="cb719-8" data-line-number="8"><span class="co">#&gt;   X1   X3 </span></a>
<a class="sourceLine" id="cb719-9" data-line-number="9"><span class="co">#&gt; 2.00 1.33</span></a></code></pre></div>
<p>As expected, it only calculates the mean of the numeric columns, <code>X1</code> and <code>X3</code>.
Let’s test that it works with another function.</p>
<div class="sourceCode" id="cb720"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb720-1" data-line-number="1"><span class="kw">col_summary2</span>(df, median)</a>
<a class="sourceLine" id="cb720-2" data-line-number="2"><span class="co">#&gt; X1 X3 </span></a>
<a class="sourceLine" id="cb720-3" data-line-number="3"><span class="co">#&gt;  2  0</span></a></code></pre></div>
</div>
</div>
</div>
<div id="the-map-functions" class="section level2 r4ds-section">
<h2>
<a href="#the-map-functions" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a><span class="header-section-number">21.5</span> The map functions<a href="https://r4ds.had.co.nz/iteration.html#the-map-functions" class="r4ds-section-link section-link" aria-hidden="true"><i class="fa fa-external-link" aria-hidden="true"></i></a>
</h2>
<div id="exercise-21.5.1" class="section level3 unnumbered exercise" data-number="21.5.1">
<h3>Exercise 21.5.1<a href="#exercise-21.5.1" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a>
</h3>
<div class="question">
<p>Write code that uses one of the map functions to:</p>
<ol style="list-style-type: decimal">
<li>Compute the mean of every column in <code>mtcars</code>.</li>
<li>Determine the type of each column in <code>nycflights13::flights</code>.</li>
<li>Compute the number of unique values in each column of <code>iris</code>.</li>
<li>Generate 10 random normals for each of <span class="math inline">\(\mu = -10\)</span>, <span class="math inline">\(0\)</span>, <span class="math inline">\(10\)</span>, and <span class="math inline">\(100\)</span>.</li>
</ol>
</div>
<div class="answer">
<ol style="list-style-type: decimal">
<li>
<p>To calculate the mean of every column in <code>mtcars</code>, apply the function
<code>mean()</code> to each column, and use <code>map_dbl</code>, since the results are numeric.</p>
<div class="sourceCode" id="cb721"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb721-1" data-line-number="1"><span class="kw">map_dbl</span>(mtcars, mean)</a>
<a class="sourceLine" id="cb721-2" data-line-number="2"><span class="co">#&gt;     mpg     cyl    disp      hp    drat      wt    qsec      vs      am    gear </span></a>
<a class="sourceLine" id="cb721-3" data-line-number="3"><span class="co">#&gt;  20.091   6.188 230.722 146.688   3.597   3.217  17.849   0.438   0.406   3.688 </span></a>
<a class="sourceLine" id="cb721-4" data-line-number="4"><span class="co">#&gt;    carb </span></a>
<a class="sourceLine" id="cb721-5" data-line-number="5"><span class="co">#&gt;   2.812</span></a></code></pre></div>
</li>
<li>
<p>To calculate the type of every column in <code>nycflights13::flights</code> apply
the function <code>typeof()</code>, discussed in the section on <a href="https://r4ds.had.co.nz/vectors.html#vector-basics">Vector basics</a>,
and use <code>map_chr()</code>, since the results are character.</p>
<div class="sourceCode" id="cb722"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb722-1" data-line-number="1"><span class="kw">map_chr</span>(nycflights13<span class="op">::</span>flights, typeof)</a>
<a class="sourceLine" id="cb722-2" data-line-number="2"><span class="co">#&gt;           year          month            day       dep_time sched_dep_time </span></a>
<a class="sourceLine" id="cb722-3" data-line-number="3"><span class="co">#&gt;      "integer"      "integer"      "integer"      "integer"      "integer" </span></a>
<a class="sourceLine" id="cb722-4" data-line-number="4"><span class="co">#&gt;      dep_delay       arr_time sched_arr_time      arr_delay        carrier </span></a>
<a class="sourceLine" id="cb722-5" data-line-number="5"><span class="co">#&gt;       "double"      "integer"      "integer"       "double"    "character" </span></a>
<a class="sourceLine" id="cb722-6" data-line-number="6"><span class="co">#&gt;         flight        tailnum         origin           dest       air_time </span></a>
<a class="sourceLine" id="cb722-7" data-line-number="7"><span class="co">#&gt;      "integer"    "character"    "character"    "character"       "double" </span></a>
<a class="sourceLine" id="cb722-8" data-line-number="8"><span class="co">#&gt;       distance           hour         minute      time_hour </span></a>
<a class="sourceLine" id="cb722-9" data-line-number="9"><span class="co">#&gt;       "double"       "double"       "double"       "double"</span></a></code></pre></div>
</li>
<li>
<p>There is no function that directly calculates the number of unique values
in a vector. For a single column, the number of unique values of a vector
can be calculated like so,</p>
<div class="sourceCode" id="cb723"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb723-1" data-line-number="1"><span class="kw">length</span>(<span class="kw">unique</span>(iris<span class="op">$</span>Species))</a>
<a class="sourceLine" id="cb723-2" data-line-number="2"><span class="co">#&gt; [1] 3</span></a></code></pre></div>
<p>To apply this to all columns, we can provide the map an anonymous function.
We can write anonymous function using the standard R syntax.</p>
<div class="sourceCode" id="cb724"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb724-1" data-line-number="1"><span class="kw">map_int</span>(iris, <span class="cf">function</span>(x) <span class="kw">length</span>(<span class="kw">unique</span>(x)))</a>
<a class="sourceLine" id="cb724-2" data-line-number="2"><span class="co">#&gt; Sepal.Length  Sepal.Width Petal.Length  Petal.Width      Species </span></a>
<a class="sourceLine" id="cb724-3" data-line-number="3"><span class="co">#&gt;           35           23           43           22            3</span></a></code></pre></div>
<p>We could also use the compact, one-sided formula shortcut that purrr provides.</p>
<div class="sourceCode" id="cb725"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb725-1" data-line-number="1"><span class="kw">map_int</span>(iris, <span class="op">~</span><span class="kw">length</span>(<span class="kw">unique</span>(.)))</a>
<a class="sourceLine" id="cb725-2" data-line-number="2"><span class="co">#&gt; Sepal.Length  Sepal.Width Petal.Length  Petal.Width      Species </span></a>
<a class="sourceLine" id="cb725-3" data-line-number="3"><span class="co">#&gt;           35           23           43           22            3</span></a></code></pre></div>
<p>In these examples, the <code>map_int()</code> function is used since <code>length()</code> returns an integer.
However, the <code>map_dbl()</code> function will also work.</p>
<div class="sourceCode" id="cb726"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb726-1" data-line-number="1"><span class="kw">map_dbl</span>(iris, <span class="op">~</span><span class="kw">length</span>(<span class="kw">unique</span>(.)))</a></code></pre></div>
</li>
<li>
<p>To generate 10 random normals for each of <span class="math inline">\(\mu = -10\)</span>, <span class="math inline">\(0\)</span>, <span class="math inline">\(10\)</span>, and <span class="math inline">\(100\)</span>:
The result is a list of numeric vectors.</p>
<div class="sourceCode" id="cb727"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb727-1" data-line-number="1"><span class="kw">map</span>(<span class="kw">c</span>(<span class="op">-</span><span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">10</span>, <span class="dv">100</span>), <span class="op">~</span><span class="kw">rnorm</span>(<span class="dt">n =</span> <span class="dv">10</span>, <span class="dt">mean =</span> .))</a>
<a class="sourceLine" id="cb727-2" data-line-number="2"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb727-3" data-line-number="3"><span class="co">#&gt;  [1]  -9.56  -9.87 -10.83 -10.50 -11.19 -10.75  -8.54 -10.83  -9.71 -10.48</span></a>
<a class="sourceLine" id="cb727-4" data-line-number="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb727-5" data-line-number="5"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb727-6" data-line-number="6"><span class="co">#&gt;  [1] -0.6048  1.4601  0.1497 -1.4333 -0.0103 -0.2122 -0.9063 -2.1022  1.8934</span></a>
<a class="sourceLine" id="cb727-7" data-line-number="7"><span class="co">#&gt; [10] -0.9681</span></a>
<a class="sourceLine" id="cb727-8" data-line-number="8"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb727-9" data-line-number="9"><span class="co">#&gt; [[3]]</span></a>
<a class="sourceLine" id="cb727-10" data-line-number="10"><span class="co">#&gt;  [1]  9.90 10.24 10.06  7.82  9.88 10.11 10.01 11.88 12.16 10.71</span></a>
<a class="sourceLine" id="cb727-11" data-line-number="11"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb727-12" data-line-number="12"><span class="co">#&gt; [[4]]</span></a>
<a class="sourceLine" id="cb727-13" data-line-number="13"><span class="co">#&gt;  [1] 100.8  99.7 101.0  99.1 100.6 100.3 100.4 101.1  99.1 100.2</span></a></code></pre></div>
<p>Since a single call of <code>rnorm()</code> returns a numeric vector with a length greater
than one we cannot use <code>map_dbl</code>, which requires the function to return a numeric
vector that is only length one (see <a href="iteration.html#exercise-21.5.4">Exercise 21.5.4</a>).
The map functions pass any additional arguments to the function being called.</p>
</li>
</ol>
</div>
</div>
<div id="exercise-21.5.2" class="section level3 unnumbered exercise" data-number="21.5.2">
<h3>Exercise 21.5.2<a href="#exercise-21.5.2" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a>
</h3>
<div class="question">
<p>How can you create a single vector that for each column in a data frame indicates whether or not it’s a factor?</p>
</div>
<div class="answer">
<p>The function <code>is.factor()</code> indicates whether a vector is a factor.</p>
<div class="sourceCode" id="cb728"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb728-1" data-line-number="1"><span class="kw">is.factor</span>(diamonds<span class="op">$</span>color)</a>
<a class="sourceLine" id="cb728-2" data-line-number="2"><span class="co">#&gt; [1] TRUE</span></a></code></pre></div>
<p>To check all columns in a factor for whether it is a factor is a job for a <code>map_*()</code> function.
Since the result of <code>is.factor()</code> is logical, we will use <code>map_lgl()</code> to apply <code>is.factor()</code> to the columns of the data frame.</p>
<div class="sourceCode" id="cb729"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb729-1" data-line-number="1"><span class="kw">map_lgl</span>(diamonds, is.factor)</a>
<a class="sourceLine" id="cb729-2" data-line-number="2"><span class="co">#&gt;   carat     cut   color clarity   depth   table   price       x       y       z </span></a>
<a class="sourceLine" id="cb729-3" data-line-number="3"><span class="co">#&gt;   FALSE    TRUE    TRUE    TRUE   FALSE   FALSE   FALSE   FALSE   FALSE   FALSE</span></a></code></pre></div>
</div>
</div>
<div id="exercise-21.5.3" class="section level3 unnumbered exercise" data-number="21.5.3">
<h3>Exercise 21.5.3<a href="#exercise-21.5.3" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a>
</h3>
<div class="question">
<p>What happens when you use the map functions on vectors that aren’t lists?
What does <code>map(1:5, runif)</code> do?
Why?</p>
</div>
<div class="answer">
<p>Map functions work with any vectors, not just lists.
As with lists, the map functions will apply the function to each element of the vector.
In the following examples, the inputs to <code>map()</code> are atomic vectors (logical, character, integer, double).</p>
<div class="sourceCode" id="cb730"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb730-1" data-line-number="1"><span class="kw">map</span>(<span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>), <span class="op">~</span><span class="st"> </span><span class="op">!</span>.)</a>
<a class="sourceLine" id="cb730-2" data-line-number="2"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb730-3" data-line-number="3"><span class="co">#&gt; [1] FALSE</span></a>
<a class="sourceLine" id="cb730-4" data-line-number="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb730-5" data-line-number="5"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb730-6" data-line-number="6"><span class="co">#&gt; [1] TRUE</span></a>
<a class="sourceLine" id="cb730-7" data-line-number="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb730-8" data-line-number="8"><span class="co">#&gt; [[3]]</span></a>
<a class="sourceLine" id="cb730-9" data-line-number="9"><span class="co">#&gt; [1] FALSE</span></a>
<a class="sourceLine" id="cb730-10" data-line-number="10"><span class="kw">map</span>(<span class="kw">c</span>(<span class="st">"Hello"</span>, <span class="st">"World"</span>), str_to_upper)</a>
<a class="sourceLine" id="cb730-11" data-line-number="11"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb730-12" data-line-number="12"><span class="co">#&gt; [1] "HELLO"</span></a>
<a class="sourceLine" id="cb730-13" data-line-number="13"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb730-14" data-line-number="14"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb730-15" data-line-number="15"><span class="co">#&gt; [1] "WORLD"</span></a>
<a class="sourceLine" id="cb730-16" data-line-number="16"><span class="kw">map</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="op">~</span><span class="st"> </span><span class="kw">rnorm</span>(.))</a>
<a class="sourceLine" id="cb730-17" data-line-number="17"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb730-18" data-line-number="18"><span class="co">#&gt; [1] 1.42</span></a>
<a class="sourceLine" id="cb730-19" data-line-number="19"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb730-20" data-line-number="20"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb730-21" data-line-number="21"><span class="co">#&gt; [1] -0.384 -0.174</span></a>
<a class="sourceLine" id="cb730-22" data-line-number="22"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb730-23" data-line-number="23"><span class="co">#&gt; [[3]]</span></a>
<a class="sourceLine" id="cb730-24" data-line-number="24"><span class="co">#&gt; [1] -0.222 -1.010  0.481</span></a>
<a class="sourceLine" id="cb730-25" data-line-number="25"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb730-26" data-line-number="26"><span class="co">#&gt; [[4]]</span></a>
<a class="sourceLine" id="cb730-27" data-line-number="27"><span class="co">#&gt; [1]  1.604 -1.515 -1.416  0.877</span></a>
<a class="sourceLine" id="cb730-28" data-line-number="28"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb730-29" data-line-number="29"><span class="co">#&gt; [[5]]</span></a>
<a class="sourceLine" id="cb730-30" data-line-number="30"><span class="co">#&gt; [1]  0.624  2.112 -0.356 -1.064  1.077</span></a>
<a class="sourceLine" id="cb730-31" data-line-number="31"><span class="kw">map</span>(<span class="kw">c</span>(<span class="op">-</span><span class="fl">0.5</span>, <span class="dv">0</span>, <span class="dv">1</span>), <span class="op">~</span><span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">1</span>, <span class="dt">mean =</span> .))</a>
<a class="sourceLine" id="cb730-32" data-line-number="32"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb730-33" data-line-number="33"><span class="co">#&gt; [1] 0.682</span></a>
<a class="sourceLine" id="cb730-34" data-line-number="34"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb730-35" data-line-number="35"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb730-36" data-line-number="36"><span class="co">#&gt; [1] 0.198</span></a>
<a class="sourceLine" id="cb730-37" data-line-number="37"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb730-38" data-line-number="38"><span class="co">#&gt; [[3]]</span></a>
<a class="sourceLine" id="cb730-39" data-line-number="39"><span class="co">#&gt; [1] 0.6</span></a></code></pre></div>
<p>It is important to be aware that while the input of <code>map()</code> can be any vector, the output is always a list.</p>
<div class="sourceCode" id="cb731"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb731-1" data-line-number="1"><span class="kw">map</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, runif)</a>
<a class="sourceLine" id="cb731-2" data-line-number="2"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb731-3" data-line-number="3"><span class="co">#&gt; [1] 0.731</span></a>
<a class="sourceLine" id="cb731-4" data-line-number="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb731-5" data-line-number="5"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb731-6" data-line-number="6"><span class="co">#&gt; [1] 0.852 0.976</span></a>
<a class="sourceLine" id="cb731-7" data-line-number="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb731-8" data-line-number="8"><span class="co">#&gt; [[3]]</span></a>
<a class="sourceLine" id="cb731-9" data-line-number="9"><span class="co">#&gt; [1] 0.113 0.970 0.648</span></a>
<a class="sourceLine" id="cb731-10" data-line-number="10"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb731-11" data-line-number="11"><span class="co">#&gt; [[4]]</span></a>
<a class="sourceLine" id="cb731-12" data-line-number="12"><span class="co">#&gt; [1] 0.0561 0.4731 0.2946 0.6103</span></a>
<a class="sourceLine" id="cb731-13" data-line-number="13"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb731-14" data-line-number="14"><span class="co">#&gt; [[5]]</span></a>
<a class="sourceLine" id="cb731-15" data-line-number="15"><span class="co">#&gt; [1] 0.1211 0.6294 0.7120 0.6121 0.0344</span></a></code></pre></div>
<p>This expression is equivalent to running the following.</p>
<div class="sourceCode" id="cb732"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb732-1" data-line-number="1"><span class="kw">list</span>(</a>
<a class="sourceLine" id="cb732-2" data-line-number="2">  <span class="kw">runif</span>(<span class="dv">1</span>),</a>
<a class="sourceLine" id="cb732-3" data-line-number="3">  <span class="kw">runif</span>(<span class="dv">2</span>),</a>
<a class="sourceLine" id="cb732-4" data-line-number="4">  <span class="kw">runif</span>(<span class="dv">3</span>),</a>
<a class="sourceLine" id="cb732-5" data-line-number="5">  <span class="kw">runif</span>(<span class="dv">4</span>),</a>
<a class="sourceLine" id="cb732-6" data-line-number="6">  <span class="kw">runif</span>(<span class="dv">5</span>)</a>
<a class="sourceLine" id="cb732-7" data-line-number="7">)</a>
<a class="sourceLine" id="cb732-8" data-line-number="8"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb732-9" data-line-number="9"><span class="co">#&gt; [1] 0.666</span></a>
<a class="sourceLine" id="cb732-10" data-line-number="10"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb732-11" data-line-number="11"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb732-12" data-line-number="12"><span class="co">#&gt; [1] 0.653 0.452</span></a>
<a class="sourceLine" id="cb732-13" data-line-number="13"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb732-14" data-line-number="14"><span class="co">#&gt; [[3]]</span></a>
<a class="sourceLine" id="cb732-15" data-line-number="15"><span class="co">#&gt; [1] 0.517 0.677 0.881</span></a>
<a class="sourceLine" id="cb732-16" data-line-number="16"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb732-17" data-line-number="17"><span class="co">#&gt; [[4]]</span></a>
<a class="sourceLine" id="cb732-18" data-line-number="18"><span class="co">#&gt; [1] 0.731 0.399 0.431 0.145</span></a>
<a class="sourceLine" id="cb732-19" data-line-number="19"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb732-20" data-line-number="20"><span class="co">#&gt; [[5]]</span></a>
<a class="sourceLine" id="cb732-21" data-line-number="21"><span class="co">#&gt; [1] 0.4511 0.5788 0.0704 0.7423 0.5492</span></a></code></pre></div>
<p>The <code>map()</code> function loops through the numbers 1 to 5.
For each value, it calls the <code>runif()</code> with that number as the first argument, which is the number of sample to draw.
The result is a length five list with numeric vectors of sizes one through five, each with random samples from a uniform distribution.
Note that although input to <code>map()</code> was an integer vector, the return value was a list.</p>
</div>
</div>
<div id="exercise-21.5.4" class="section level3 unnumbered exercise" data-number="21.5.4">
<h3>Exercise 21.5.4<a href="#exercise-21.5.4" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a>
</h3>
<div class="question">
<p>What does <code>map(-2:2, rnorm, n = 5)</code> do?
Why?</p>
<p>What does <code>map_dbl(-2:2, rnorm, n = 5)</code> do?
Why?</p>
</div>
<div class="answer">
<p>Consider the first expression.</p>
<div class="sourceCode" id="cb733"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb733-1" data-line-number="1"><span class="kw">map</span>(<span class="op">-</span><span class="dv">2</span><span class="op">:</span><span class="dv">2</span>, rnorm, <span class="dt">n =</span> <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb733-2" data-line-number="2"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb733-3" data-line-number="3"><span class="co">#&gt; [1] -1.656 -0.522 -1.928  0.126 -3.476</span></a>
<a class="sourceLine" id="cb733-4" data-line-number="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb733-5" data-line-number="5"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb733-6" data-line-number="6"><span class="co">#&gt; [1] -0.5921  0.3940 -0.6397 -0.3454  0.0522</span></a>
<a class="sourceLine" id="cb733-7" data-line-number="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb733-8" data-line-number="8"><span class="co">#&gt; [[3]]</span></a>
<a class="sourceLine" id="cb733-9" data-line-number="9"><span class="co">#&gt; [1] -1.980  1.208 -0.169  0.295  1.266</span></a>
<a class="sourceLine" id="cb733-10" data-line-number="10"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb733-11" data-line-number="11"><span class="co">#&gt; [[4]]</span></a>
<a class="sourceLine" id="cb733-12" data-line-number="12"><span class="co">#&gt; [1] -0.135 -0.131  1.110  1.853  0.766</span></a>
<a class="sourceLine" id="cb733-13" data-line-number="13"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb733-14" data-line-number="14"><span class="co">#&gt; [[5]]</span></a>
<a class="sourceLine" id="cb733-15" data-line-number="15"><span class="co">#&gt; [1] 4.087 1.889 0.607 0.858 3.705</span></a></code></pre></div>
<p>This expression takes samples of size five from five normal distributions, with means of (-2, -1, 0, 1, and 2), but the same standard deviation (1).
It returns a list with each element a numeric vectors of length 5.</p>
<p>However, if instead, we use <code>map_dbl()</code>, the expression raises an error.</p>
<div class="sourceCode" id="cb734"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb734-1" data-line-number="1"><span class="kw">map_dbl</span>(<span class="op">-</span><span class="dv">2</span><span class="op">:</span><span class="dv">2</span>, rnorm, <span class="dt">n =</span> <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb734-2" data-line-number="2"><span class="co">#&gt; Error: Result 1 must be a single double, not a double vector of length 5</span></a></code></pre></div>
<p>This is because the <code>map_dbl()</code> function requires the function it applies to each element to return a numeric vector of length one.
If the function returns either a non-numeric vector or a numeric vector with a length greater than one, <code>map_dbl()</code> will raise an error.
The reason for this strictness is that <code>map_dbl()</code> guarantees that it will return a numeric vector of the <em>same length</em> as its input vector.</p>
<p>This concept applies to the other <code>map_*()</code> functions.
The function <code>map_chr()</code> requires that the function always return a <em>character</em> vector of length one;
<code>map_int()</code> requires that the function always return an <em>integer</em> vector of length one;
<code>map_lgl()</code> requires that the function always return an <em>logical</em> vector of length one.
Use the <code>map()</code> function if the function will return values of varying types or lengths.</p>
<p>To return a numeric vector, use <code>flatten_dbl()</code> to coerce the list returned by <code>map()</code> to a numeric vector.</p>
<div class="sourceCode" id="cb735"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb735-1" data-line-number="1"><span class="kw">map</span>(<span class="op">-</span><span class="dv">2</span><span class="op">:</span><span class="dv">2</span>, rnorm, <span class="dt">n =</span> <span class="dv">5</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb735-2" data-line-number="2"><span class="st">  </span><span class="kw">flatten_dbl</span>()</a>
<a class="sourceLine" id="cb735-3" data-line-number="3"><span class="co">#&gt;  [1] -2.145 -1.474 -0.266 -0.551 -0.482 -1.384  0.827 -1.551 -1.866 -1.344</span></a>
<a class="sourceLine" id="cb735-4" data-line-number="4"><span class="co">#&gt; [11]  1.063  0.813  1.803 -0.105  0.982 -0.713  0.168  2.100  0.826  1.179</span></a>
<a class="sourceLine" id="cb735-5" data-line-number="5"><span class="co">#&gt; [21]  1.302  1.040  1.025  1.661  3.152</span></a></code></pre></div>
</div>
</div>
<div id="exercise-21.5.5" class="section level3 unnumbered exercise" data-number="21.5.5">
<h3>Exercise 21.5.5<a href="#exercise-21.5.5" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a>
</h3>
<div class="question">
<p>Rewrite <code>map(x, function(df) lm(mpg ~ wt, data = df))</code> to eliminate the anonymous function.</p>
</div>
<div class="answer">
<p>This code in this question does not run, so I will use the following code.</p>
<div class="sourceCode" id="cb736"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb736-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">split</span>(mtcars, mtcars<span class="op">$</span>cyl)</a>
<a class="sourceLine" id="cb736-2" data-line-number="2"><span class="kw">map</span>(x, <span class="cf">function</span>(df) <span class="kw">lm</span>(mpg <span class="op">~</span><span class="st"> </span>wt, <span class="dt">data =</span> df))</a>
<a class="sourceLine" id="cb736-3" data-line-number="3"><span class="co">#&gt; $`4`</span></a>
<a class="sourceLine" id="cb736-4" data-line-number="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb736-5" data-line-number="5"><span class="co">#&gt; Call:</span></a>
<a class="sourceLine" id="cb736-6" data-line-number="6"><span class="co">#&gt; lm(formula = mpg ~ wt, data = df)</span></a>
<a class="sourceLine" id="cb736-7" data-line-number="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb736-8" data-line-number="8"><span class="co">#&gt; Coefficients:</span></a>
<a class="sourceLine" id="cb736-9" data-line-number="9"><span class="co">#&gt; (Intercept)           wt  </span></a>
<a class="sourceLine" id="cb736-10" data-line-number="10"><span class="co">#&gt;       39.57        -5.65  </span></a>
<a class="sourceLine" id="cb736-11" data-line-number="11"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb736-12" data-line-number="12"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb736-13" data-line-number="13"><span class="co">#&gt; $`6`</span></a>
<a class="sourceLine" id="cb736-14" data-line-number="14"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb736-15" data-line-number="15"><span class="co">#&gt; Call:</span></a>
<a class="sourceLine" id="cb736-16" data-line-number="16"><span class="co">#&gt; lm(formula = mpg ~ wt, data = df)</span></a>
<a class="sourceLine" id="cb736-17" data-line-number="17"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb736-18" data-line-number="18"><span class="co">#&gt; Coefficients:</span></a>
<a class="sourceLine" id="cb736-19" data-line-number="19"><span class="co">#&gt; (Intercept)           wt  </span></a>
<a class="sourceLine" id="cb736-20" data-line-number="20"><span class="co">#&gt;       28.41        -2.78  </span></a>
<a class="sourceLine" id="cb736-21" data-line-number="21"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb736-22" data-line-number="22"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb736-23" data-line-number="23"><span class="co">#&gt; $`8`</span></a>
<a class="sourceLine" id="cb736-24" data-line-number="24"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb736-25" data-line-number="25"><span class="co">#&gt; Call:</span></a>
<a class="sourceLine" id="cb736-26" data-line-number="26"><span class="co">#&gt; lm(formula = mpg ~ wt, data = df)</span></a>
<a class="sourceLine" id="cb736-27" data-line-number="27"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb736-28" data-line-number="28"><span class="co">#&gt; Coefficients:</span></a>
<a class="sourceLine" id="cb736-29" data-line-number="29"><span class="co">#&gt; (Intercept)           wt  </span></a>
<a class="sourceLine" id="cb736-30" data-line-number="30"><span class="co">#&gt;       23.87        -2.19</span></a></code></pre></div>
<p>We can eliminate the use of an anonymous function using the <code>~</code> shortcut.</p>
<div class="sourceCode" id="cb737"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb737-1" data-line-number="1"><span class="kw">map</span>(x, <span class="op">~</span><span class="st"> </span><span class="kw">lm</span>(mpg <span class="op">~</span><span class="st"> </span>wt, <span class="dt">data =</span> .))</a>
<a class="sourceLine" id="cb737-2" data-line-number="2"><span class="co">#&gt; $`4`</span></a>
<a class="sourceLine" id="cb737-3" data-line-number="3"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb737-4" data-line-number="4"><span class="co">#&gt; Call:</span></a>
<a class="sourceLine" id="cb737-5" data-line-number="5"><span class="co">#&gt; lm(formula = mpg ~ wt, data = .)</span></a>
<a class="sourceLine" id="cb737-6" data-line-number="6"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb737-7" data-line-number="7"><span class="co">#&gt; Coefficients:</span></a>
<a class="sourceLine" id="cb737-8" data-line-number="8"><span class="co">#&gt; (Intercept)           wt  </span></a>
<a class="sourceLine" id="cb737-9" data-line-number="9"><span class="co">#&gt;       39.57        -5.65  </span></a>
<a class="sourceLine" id="cb737-10" data-line-number="10"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb737-11" data-line-number="11"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb737-12" data-line-number="12"><span class="co">#&gt; $`6`</span></a>
<a class="sourceLine" id="cb737-13" data-line-number="13"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb737-14" data-line-number="14"><span class="co">#&gt; Call:</span></a>
<a class="sourceLine" id="cb737-15" data-line-number="15"><span class="co">#&gt; lm(formula = mpg ~ wt, data = .)</span></a>
<a class="sourceLine" id="cb737-16" data-line-number="16"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb737-17" data-line-number="17"><span class="co">#&gt; Coefficients:</span></a>
<a class="sourceLine" id="cb737-18" data-line-number="18"><span class="co">#&gt; (Intercept)           wt  </span></a>
<a class="sourceLine" id="cb737-19" data-line-number="19"><span class="co">#&gt;       28.41        -2.78  </span></a>
<a class="sourceLine" id="cb737-20" data-line-number="20"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb737-21" data-line-number="21"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb737-22" data-line-number="22"><span class="co">#&gt; $`8`</span></a>
<a class="sourceLine" id="cb737-23" data-line-number="23"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb737-24" data-line-number="24"><span class="co">#&gt; Call:</span></a>
<a class="sourceLine" id="cb737-25" data-line-number="25"><span class="co">#&gt; lm(formula = mpg ~ wt, data = .)</span></a>
<a class="sourceLine" id="cb737-26" data-line-number="26"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb737-27" data-line-number="27"><span class="co">#&gt; Coefficients:</span></a>
<a class="sourceLine" id="cb737-28" data-line-number="28"><span class="co">#&gt; (Intercept)           wt  </span></a>
<a class="sourceLine" id="cb737-29" data-line-number="29"><span class="co">#&gt;       23.87        -2.19</span></a></code></pre></div>
<p>Though not the intent of this question, the other way to eliminate anonymous function is to create a named one.</p>
<div class="sourceCode" id="cb738"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb738-1" data-line-number="1">run_reg &lt;-<span class="st"> </span><span class="cf">function</span>(df) {</a>
<a class="sourceLine" id="cb738-2" data-line-number="2">  <span class="kw">lm</span>(mpg <span class="op">~</span><span class="st"> </span>wt, <span class="dt">data =</span> df)</a>
<a class="sourceLine" id="cb738-3" data-line-number="3">}</a>
<a class="sourceLine" id="cb738-4" data-line-number="4"><span class="kw">map</span>(x, run_reg)</a>
<a class="sourceLine" id="cb738-5" data-line-number="5"><span class="co">#&gt; $`4`</span></a>
<a class="sourceLine" id="cb738-6" data-line-number="6"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb738-7" data-line-number="7"><span class="co">#&gt; Call:</span></a>
<a class="sourceLine" id="cb738-8" data-line-number="8"><span class="co">#&gt; lm(formula = mpg ~ wt, data = df)</span></a>
<a class="sourceLine" id="cb738-9" data-line-number="9"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb738-10" data-line-number="10"><span class="co">#&gt; Coefficients:</span></a>
<a class="sourceLine" id="cb738-11" data-line-number="11"><span class="co">#&gt; (Intercept)           wt  </span></a>
<a class="sourceLine" id="cb738-12" data-line-number="12"><span class="co">#&gt;       39.57        -5.65  </span></a>
<a class="sourceLine" id="cb738-13" data-line-number="13"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb738-14" data-line-number="14"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb738-15" data-line-number="15"><span class="co">#&gt; $`6`</span></a>
<a class="sourceLine" id="cb738-16" data-line-number="16"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb738-17" data-line-number="17"><span class="co">#&gt; Call:</span></a>
<a class="sourceLine" id="cb738-18" data-line-number="18"><span class="co">#&gt; lm(formula = mpg ~ wt, data = df)</span></a>
<a class="sourceLine" id="cb738-19" data-line-number="19"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb738-20" data-line-number="20"><span class="co">#&gt; Coefficients:</span></a>
<a class="sourceLine" id="cb738-21" data-line-number="21"><span class="co">#&gt; (Intercept)           wt  </span></a>
<a class="sourceLine" id="cb738-22" data-line-number="22"><span class="co">#&gt;       28.41        -2.78  </span></a>
<a class="sourceLine" id="cb738-23" data-line-number="23"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb738-24" data-line-number="24"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb738-25" data-line-number="25"><span class="co">#&gt; $`8`</span></a>
<a class="sourceLine" id="cb738-26" data-line-number="26"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb738-27" data-line-number="27"><span class="co">#&gt; Call:</span></a>
<a class="sourceLine" id="cb738-28" data-line-number="28"><span class="co">#&gt; lm(formula = mpg ~ wt, data = df)</span></a>
<a class="sourceLine" id="cb738-29" data-line-number="29"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb738-30" data-line-number="30"><span class="co">#&gt; Coefficients:</span></a>
<a class="sourceLine" id="cb738-31" data-line-number="31"><span class="co">#&gt; (Intercept)           wt  </span></a>
<a class="sourceLine" id="cb738-32" data-line-number="32"><span class="co">#&gt;       23.87        -2.19</span></a></code></pre></div>
</div>
</div>
</div>
<div id="dealing-with-failure" class="section level2 r4ds-section">
<h2>
<a href="#dealing-with-failure" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a><span class="header-section-number">21.6</span> Dealing with failure<a href="https://r4ds.had.co.nz/iteration.html#dealing-with-failure" class="r4ds-section-link section-link" aria-hidden="true"><i class="fa fa-external-link" aria-hidden="true"></i></a>
</h2>
<div class="alert alert-warning hints-alert">
<div class="hints-icon">
<i class="fa fa-exclamation-circle"></i>
</div>
<div class="hints-container">No exercises</div>
</div>
</div>
<div id="mapping-over-multiple-arguments" class="section level2 r4ds-section">
<h2>
<a href="#mapping-over-multiple-arguments" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a><span class="header-section-number">21.7</span> Mapping over multiple arguments<a href="https://r4ds.had.co.nz/iteration.html#mapping-over-multiple-arguments" class="r4ds-section-link section-link" aria-hidden="true"><i class="fa fa-external-link" aria-hidden="true"></i></a>
</h2>
<div class="alert alert-warning hints-alert">
<div class="hints-icon">
<i class="fa fa-exclamation-circle"></i>
</div>
<div class="hints-container">No exercises</div>
</div>
</div>
<div id="walk" class="section level2 r4ds-section">
<h2>
<a href="#walk" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a><span class="header-section-number">21.8</span> Walk<a href="https://r4ds.had.co.nz/iteration.html#walk" class="r4ds-section-link section-link" aria-hidden="true"><i class="fa fa-external-link" aria-hidden="true"></i></a>
</h2>
<div class="alert alert-warning hints-alert">
<div class="hints-icon">
<i class="fa fa-exclamation-circle"></i>
</div>
<div class="hints-container">No exercises</div>
</div>
</div>
<div id="other-patterns-of-for-loops" class="section level2 r4ds-section">
<h2>
<a href="#other-patterns-of-for-loops" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a><span class="header-section-number">21.9</span> Other patterns of for loops<a href="https://r4ds.had.co.nz/iteration.html#other-patterns-of-for-loops" class="r4ds-section-link section-link" aria-hidden="true"><i class="fa fa-external-link" aria-hidden="true"></i></a>
</h2>
<div id="exercise-21.9.1" class="section level3 unnumbered exercise" data-number="21.9.1">
<h3>Exercise 21.9.1<a href="#exercise-21.9.1" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a>
</h3>
<div class="question">
<p>Implement your own version of <code>every()</code> using a for loop.
Compare it with <code>purrr::every()</code>.
What does purrr’s version do that your version doesn’t?</p>
</div>
<div class="answer">
<div class="sourceCode" id="cb739"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb739-1" data-line-number="1"><span class="co"># Use ... to pass arguments to the function</span></a>
<a class="sourceLine" id="cb739-2" data-line-number="2">every2 &lt;-<span class="st"> </span><span class="cf">function</span>(.x, .p, ...) {</a>
<a class="sourceLine" id="cb739-3" data-line-number="3">  <span class="cf">for</span> (i <span class="cf">in</span> .x) {</a>
<a class="sourceLine" id="cb739-4" data-line-number="4">    <span class="cf">if</span> (<span class="op">!</span><span class="kw">.p</span>(i, ...)) {</a>
<a class="sourceLine" id="cb739-5" data-line-number="5">      <span class="co"># If any is FALSE we know not all of then were TRUE</span></a>
<a class="sourceLine" id="cb739-6" data-line-number="6">      <span class="kw">return</span>(<span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb739-7" data-line-number="7">    }</a>
<a class="sourceLine" id="cb739-8" data-line-number="8">  }</a>
<a class="sourceLine" id="cb739-9" data-line-number="9">  <span class="co"># if nothing was FALSE, then it is TRUE</span></a>
<a class="sourceLine" id="cb739-10" data-line-number="10">  <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb739-11" data-line-number="11">}</a>
<a class="sourceLine" id="cb739-12" data-line-number="12"></a>
<a class="sourceLine" id="cb739-13" data-line-number="13"><span class="kw">every2</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb739-14" data-line-number="14">  x <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb739-15" data-line-number="15">})</a>
<a class="sourceLine" id="cb739-16" data-line-number="16"><span class="co">#&gt; [1] FALSE</span></a>
<a class="sourceLine" id="cb739-17" data-line-number="17"><span class="kw">every2</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb739-18" data-line-number="18">  x <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb739-19" data-line-number="19">})</a>
<a class="sourceLine" id="cb739-20" data-line-number="20"><span class="co">#&gt; [1] TRUE</span></a></code></pre></div>
<p>The function <code>purrr::every()</code> does fancy things with the predicate function argument <code>.p</code>, like taking a logical vector instead of a function, or being able to test part of a string if the elements of <code>.x</code> are lists.</p>
</div>
</div>
<div id="exercise-21.9.2" class="section level3 unnumbered exercise" data-number="21.9.2">
<h3>Exercise 21.9.2<a href="#exercise-21.9.2" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a>
</h3>
<div class="question">
<p>Create an enhanced <code>col_summary()</code> that applies a summary function to every numeric column in a data frame.</p>
</div>
<div class="answer">
<p>I will use <code>map</code> to apply the function to all the columns, and <code>keep</code> to only select numeric columns.</p>
<div class="sourceCode" id="cb740"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb740-1" data-line-number="1">col_sum2 &lt;-<span class="st"> </span><span class="cf">function</span>(df, f, ...) {</a>
<a class="sourceLine" id="cb740-2" data-line-number="2">  <span class="kw">map</span>(<span class="kw">keep</span>(df, is.numeric), f, ...)</a>
<a class="sourceLine" id="cb740-3" data-line-number="3">}</a></code></pre></div>
<div class="sourceCode" id="cb741"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb741-1" data-line-number="1"><span class="kw">col_sum2</span>(iris, mean)</a>
<a class="sourceLine" id="cb741-2" data-line-number="2"><span class="co">#&gt; $Sepal.Length</span></a>
<a class="sourceLine" id="cb741-3" data-line-number="3"><span class="co">#&gt; [1] 5.84</span></a>
<a class="sourceLine" id="cb741-4" data-line-number="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb741-5" data-line-number="5"><span class="co">#&gt; $Sepal.Width</span></a>
<a class="sourceLine" id="cb741-6" data-line-number="6"><span class="co">#&gt; [1] 3.06</span></a>
<a class="sourceLine" id="cb741-7" data-line-number="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb741-8" data-line-number="8"><span class="co">#&gt; $Petal.Length</span></a>
<a class="sourceLine" id="cb741-9" data-line-number="9"><span class="co">#&gt; [1] 3.76</span></a>
<a class="sourceLine" id="cb741-10" data-line-number="10"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb741-11" data-line-number="11"><span class="co">#&gt; $Petal.Width</span></a>
<a class="sourceLine" id="cb741-12" data-line-number="12"><span class="co">#&gt; [1] 1.2</span></a></code></pre></div>
</div>
</div>
<div id="exercise-21.9.3" class="section level3 unnumbered exercise" data-number="21.9.3">
<h3>Exercise 21.9.3<a href="#exercise-21.9.3" class="anchor section-link" aria-hidden="true"><i class="fa fa-link" aria-hidden="true"></i></a>
</h3>
<div class="question">
<p>A possible base R equivalent of <code>col_summary()</code> is:</p>
<div class="sourceCode" id="cb742"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb742-1" data-line-number="1">col_sum3 &lt;-<span class="st"> </span><span class="cf">function</span>(df, f) {</a>
<a class="sourceLine" id="cb742-2" data-line-number="2">  is_num &lt;-<span class="st"> </span><span class="kw">sapply</span>(df, is.numeric)</a>
<a class="sourceLine" id="cb742-3" data-line-number="3">  df_num &lt;-<span class="st"> </span>df[, is_num]</a>
<a class="sourceLine" id="cb742-4" data-line-number="4">  <span class="kw">sapply</span>(df_num, f)</a>
<a class="sourceLine" id="cb742-5" data-line-number="5">}</a></code></pre></div>
<p>But it has a number of bugs as illustrated with the following inputs:</p>
<div class="sourceCode" id="cb743"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb743-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw">tibble</span>(</a>
<a class="sourceLine" id="cb743-2" data-line-number="2">  <span class="dt">x =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>,</a>
<a class="sourceLine" id="cb743-3" data-line-number="3">  <span class="dt">y =</span> <span class="dv">3</span><span class="op">:</span><span class="dv">1</span>,</a>
<a class="sourceLine" id="cb743-4" data-line-number="4">  <span class="dt">z =</span> <span class="kw">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>)</a>
<a class="sourceLine" id="cb743-5" data-line-number="5">)</a>
<a class="sourceLine" id="cb743-6" data-line-number="6"></a>
<a class="sourceLine" id="cb743-7" data-line-number="7"><span class="co"># OK</span></a>
<a class="sourceLine" id="cb743-8" data-line-number="8"><span class="kw">col_sum3</span>(df, mean)</a>
<a class="sourceLine" id="cb743-9" data-line-number="9"><span class="co"># Has problems: don't always return numeric vector</span></a>
<a class="sourceLine" id="cb743-10" data-line-number="10"><span class="kw">col_sum3</span>(df[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>], mean)</a>
<a class="sourceLine" id="cb743-11" data-line-number="11"><span class="kw">col_sum3</span>(df[<span class="dv">1</span>], mean)</a>
<a class="sourceLine" id="cb743-12" data-line-number="12"><span class="kw">col_sum3</span>(df[<span class="dv">0</span>], mean)</a></code></pre></div>
<p>What causes these bugs?</p>
</div>
<div class="answer">
<p>The cause of these bugs is the behavior of <code>sapply()</code>.
The <code>sapply()</code> function does not guarantee the type of vector it returns, and will returns different types of vectors depending on its inputs.
If no columns are selected, instead of returning an empty numeric vector, it returns an empty list.
This causes an error since we can’t use a list with <code>[</code>.</p>
<div class="sourceCode" id="cb744"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb744-1" data-line-number="1"><span class="kw">sapply</span>(df[<span class="dv">0</span>], is.numeric)</a>
<a class="sourceLine" id="cb744-2" data-line-number="2"><span class="co">#&gt; named list()</span></a></code></pre></div>
<div class="sourceCode" id="cb745"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb745-1" data-line-number="1"><span class="kw">sapply</span>(df[<span class="dv">1</span>], is.numeric)</a>
<a class="sourceLine" id="cb745-2" data-line-number="2"><span class="co">#&gt;   X1 </span></a>
<a class="sourceLine" id="cb745-3" data-line-number="3"><span class="co">#&gt; TRUE</span></a></code></pre></div>
<div class="sourceCode" id="cb746"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb746-1" data-line-number="1"><span class="kw">sapply</span>(df[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>], is.numeric)</a>
<a class="sourceLine" id="cb746-2" data-line-number="2"><span class="co">#&gt;    X1    X2 </span></a>
<a class="sourceLine" id="cb746-3" data-line-number="3"><span class="co">#&gt;  TRUE FALSE</span></a></code></pre></div>
<p>The <code>sapply()</code> function tries to be helpful by simplifying the results, but this behavior can be counterproductive.
It is okay to use the <code>sapply()</code> function interactively, but avoid programming with it.</p>
</div>

</div>
</div>
</div>



            </section>
</div>
        </div>
      </div>
<a href="vectors.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="model-intro.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script><script src="libs/gitbook-2.6.7/js/lunr.js"></script><script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script><script src="libs/gitbook-2.6.7/js/plugin-search.js"></script><script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script><script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script><script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script><script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script><script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script><script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": true,
"linkedin": true,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"],
"google": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/jrnold/r4ds-exercise-solutions/edit/master/iteration.Rmd",
"text": "Edit"
},
"history": {
"link": "https://github.com/jrnold/r4ds-exercise-solutions/commits/master/iteration.Rmd",
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>
</html>
